!function(){"use strict";var e={name:"pubfig.js",version:"5.34.7",builds:{analytics:"1.2.5",pbjs:"8.30.0"},description:"Freestar Publisher",main:"src/pubfig.js",engineStrict:!0,engines:{node:">=18"},scripts:{test:"nyc --reporter=text-summary mocha --reporter nyan -r @babel/register -r mock-local-storage -r jsdom-global/register -r mochaGlobalSetup.js test/**/*.spec.js --exit && :","test:html-report":"nyc --reporter=html mocha -r @babel/register -r mock-local-storage -r jsdom-global/register -r mochaGlobalSetup.js test/**/*.spec.js  --exit","test:watch":"mocha --watch -r @babel/register -r mock-local-storage -r jsdom-global/register -r mochaGlobalSetup.js test/**/*.spec.js","readme:coverage":"nyc report --reporter=json-summary && node updateReadme.mjs",mocha:"env TEST=true mocha",analyze:"webpack --config webpack.analyze.js","dev:rollup":"rollup --config rollup.dev.js --watch",dev:"webpack serve --config webpack.dev.js","dev:https":"webpack serve --config webpack.dev.js --https","build-rollup:production":"rollup -c rollup.prod.js && bin/base64.github.sh prod","build:github":"webpack --config webpack.prod.js && bin/base64.github.sh prod","build:release":"webpack --config webpack.release.js && bin/base64.github.sh prod","build-rollup:release":"rollup -c rollup.release.js && bin/base64.github.sh prod","build:production":"webpack --config webpack.prod.js && bin/base64.sh prod","publish:production":"bin/publish.sh a.pub.network","publish:staging":"bin/publish.sh",lint:"eslint ./src ./test && prettier --check ./src ./test","lint:fix":"eslint --max-warnings=0 --fix ./src ./test && prettier --write ./src ./test",prepare:"husky install"},"lint-staged":{"*.js":["npm run test","npm run lint:fix"]},repository:{type:"git",url:"https://github.com/freestarcapital/pubfig.js.git"},keywords:["advertising"],author:"Freestar Engineering Group",private:!0,license:"UNLICENSED",devDependencies:{"@babel/core":"^7.12.10","@babel/preset-env":"^7.0.0","@babel/register":"^7.22.15","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-eslint":"^9.0.5","@rollup/plugin-json":"^6.0.1","@rollup/plugin-multi-entry":"^6.0.1","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-replace":"^5.0.5",autoprefixer:"^10.4.16","babel-eslint":"^10.1.0","babel-loader":"^9.1.3",c8:"^8.0.1",chai:"^4.3.4","chai-spies":"^1.0.0","clean-webpack-plugin":"^4.0.0","compression-webpack-plugin":"^10.0.0","core-js":"^3.8.2","css-loader":"^6.8.1","current-git-branch":"^1.1.0",dotenv:"^16.3.1",eslint:"^7.32.0","eslint-config-prettier":"^9.1.0","eslint-loader":"^4.0.2","eslint-webpack-plugin":"^2.4.1","gpt-mock":"^1.0.2",husky:"^8.0.3",jsdom:"^22.1.0","jsdom-global":"^3.0.2","lint-staged":"^15.0.2",lodash:"^4.17.21",mocha:"^10.2.0","mocha-sinon":"^2.1.2","mock-local-storage":"^1.1.17",nyc:"^15.1.0",postcss:"^8.2.2","postcss-loader":"^7.3.3","postcss-preset-env":"^9.2.0",prettier:"^3.1.1",rollup:"^2.79.1","rollup-plugin-gzip":"^3.1.0","rollup-plugin-livereload":"^2.0.5","rollup-plugin-postcss":"^4.0.2","rollup-plugin-replace":"^2.2.0","rollup-plugin-serve":"^2.0.2","rollup-plugin-terser":"^7.0.2",semver:"^7.3.5",sinon:"^16.1.0","sinon-chai":"^3.7.0","string-replace-webpack-plugin":"^0.1.3","style-loader":"^3.3.3",webpack:"^5.88.0","webpack-bundle-analyzer":"^4.3.0","webpack-cli":"^5.1.4","webpack-dev-server":"^4.15.1","webpack-merge":"^5.7.2",yargs:"^17.7.2"},dependencies:{"adblock-detector":"^2.1.0","crypto-js":"^4.1.1",deepmerge:"^4.2.2","fast-copy":"^3.0.1","js-cookie":"^3.0.5","ua-parser-js":"^1.0.36",uuid:"^9.0.1"},browserslist:"last 2 versions"};const t="https://d.pub.network",r=["AT","BE","BG","HR","CY","CZ","DK","EE","EL","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB","NO","IS","LI"],n=["CA","CT","CO","VA","UT"],i={videoAdhesion:{prettyName:"Sticky Footer Video Adhesion",disabled:!1},stickyFooter:{prettyName:"Sticky Footer",disabled:!1,refreshDisabled:!1,refreshInterval:0},video:{prettyName:"Video",disabled:!1,refreshDisabled:!1,refreshInterval:0},standAloneVideo:{prettyName:"Stand Alone Video",disabled:!1,refreshDisabled:!1,refreshInterval:0},revolvingRail:{prettyName:"Revolving Rail",disabled:!1,refreshDisabled:!1,refreshInterval:0},pushdown:{prettyName:"Pushdown",disabled:!1,refreshDisabled:!1,refreshInterval:0},dynamicAds:{prettyName:"Dynamic Ads",disabled:!1,refreshDisabled:!1,refreshInterval:0,optionsPath:"dynamicAdOptions"},footerBidding:{prettyName:"Footer Bidding",disabled:!1,refreshDisabled:!1,refreshInterval:0},superflex:{prettyName:"Superflex",disabled:!1,refreshDisabled:!1,refreshInterval:0},slidingUnit:{prettyName:"Sliding Unit",disabled:!1,refreshDisabled:!1,refreshInterval:0},sideWall:{prettyName:"Sidewall",disabled:!1,refreshDisabled:!1,refreshInterval:0},pageGrabber:{prettyName:"Page Grabber",disabled:!1,refreshDisabled:!1,refreshInterval:0},interstitial:{prettyName:"Interstitial",disabled:!1,refreshDisabled:!1,refreshInterval:0},googleInterstitial:{prettyName:"Google Interstitial",disabled:!1,refreshDisabled:!1,refreshInterval:0},dianomiContentRec:{prettyName:"Dianomi Content Recommendation",disabled:!1,refreshDisabled:!1,refreshInterval:0},lazyLoad:{prettyName:"Lazy Loaded Ads",disabled:!1,refreshDisabled:!1,refreshInterval:0}},s=()=>{const e=document.querySelectorAll('script[src*="pubfig.min.js"]'),t=Array.from(e).find((e=>!e.src.includes("/core/")));return t?t.src.split("https://a.pub.network/")[1].split("/")[0]:"freestar-com"},o=`${t}/v2/sites/${s()}/configs?env=ENV`,a="&configId=NUMBER",c="&debug=true",d="&testId=TEST_ID",l="&variantId=VARIANT_ID",u="fs.abtest.group",f="fs.abtest.id",p="fs.abtest.type",g="fs.abtest.variant_type",h="fs.abtest.pubfig_location",m={pubfigEngineLoadInit:"pubfig-engine-load-init",pubfigEngineSetupStart:"pubfig-engine-setup-start",pubfigEngineLoad:"pubfig-engine-load",pubfigSlotRequested:"pubfig-slotRequested",pubfigStickyFooterSlotRequested:"pubfig-sticky-footer-slotRequested",pubfigSlotRenderEnded:"pubfig-slotRenderEnded",pubfigEngineSetupEnd:"pubfig-engine-setup-end",pubfigStickyFooterSlotRenderEnded:"pubfig-sticky-footer-slotRenderEnded",pubfigPrebidFsRequestBids:"pubfig-prebid-fsRequestBids",pubfigPrebidAuctionInit:"pubfig-prebid-auctionInit",pubfigPrebidAuctionEnd:"pubfig-prebid-auctionEnd",pubfigLoaded:"pubfig-loaded",pubfigInitRequestStart:"pubfig-init-request-start",pubfigInitRequestEnd:"pubfig-init-request-end"};function w(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var b=function e(t,r){function n(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=w({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var o in i)i[o]&&(s+="; "+o,!0!==i[o]&&(s+="="+i[o].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+s}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},i=0;i<r.length;i++){var s=r[i].split("="),o=s.slice(1).join("=");try{var a=decodeURIComponent(s[0]);if(n[a]=t.read(o,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",w({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,w({},this.attributes,t))},withConverter:function(t){return e(w({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const y=e=>new URLSearchParams(window.location.search).get(e)??"";function v({name:e,value:t,expires:r,path:n,domain:i}){if(!e||!t)return!1;const s={secure:!0};return r&&(s.expires=r),n&&(s.path=n),i&&(s.domain=i),b.set(e,t,s),k({name:e})}function k({name:e}){return b.get(e)}const S=()=>window.location.search.includes("fslog");function I({isActive:e=!1}){window.freestar.debug=!(!e&&!S())&&99}function T(e){return"number"==typeof e}function E(e){return"US"===e.iso&&n.includes(e.state)}function A(e){return!!e&&(r.includes(e.iso)||"QC"===e.state)}function R(e){const t=A(e),r=E(e),n=(({isGDPRCountry:e,isUspApplicable:t,ccpaPrivacyManagerId:r,gdprPrivacyManagerId:n})=>"window._sp_queue = [];window._sp_ = {\n          config: {\n              accountId: 1638,\n              baseEndpoint: 'https://cdn.privacy-mgmt.com',\n              propertyHref: 'https://"+document.location.host+`',\n              ${e?"gdpr: {},":""}\n              ${t?"ccpa: {},":""}\n              events: {\n                  onMessageChoiceSelect: function() {\n                      console.log('[event] onMessageChoiceSelect', arguments);\n                  },\n                  onMessageReady: function() {\n                      console.log('[event] onMessageReady', arguments);\n                  },\n                  onMessageChoiceError: function() {\n                      console.log('[event] onMessageChoiceError', arguments);\n                  },\n                  onPrivacyManagerAction: function() {\n                      console.log('[event] onPrivacyManagerAction', arguments);\n                  },\n                  onPMCancel: function() {\n                      console.log('[event] onPMCancel', arguments);\n                  },\n                  onMessageReceiveData: function() {\n                      console.log('[event] onMessageReceiveData', arguments);\n                  },\n                  onSPPMObjectReady: function() {\n                      console.log('[event] onSPPMObjectReady', arguments);\n                  },\n                  /* Function required for resurfacing links */\n                  onConsentReady: function (message_type, uuid, string, info) {\n                      if (document.getElementById("pmLink")) {\n                          if ((message_type == "ccpa") && (info.applies)) {\n                              /* code to insert the CCPA footer link */\n                              document.getElementById("pmLink").style.visibility = "visible";\n                              document.getElementById("pmLink").innerHTML = "Do Not Sell or Share My Personal Information";\n                              document.getElementById("pmLink").onclick = function () {\n                                  /* Set CCPA ID */\n                                  window._sp_.ccpa.loadPrivacyManagerModal('${r}');\n                              }\n                          }\n                          if ((message_type == "gdpr") && (info.applies)) {\n                              /* code to insert the GDPR footer link */\n                              document.getElementById("pmLink").style.visibility = "visible";\n                              document.getElementById("pmLink").innerHTML = "Privacy Preferences";\n                              document.getElementById("pmLink").onclick = function () {\n                                  /* Set GDPR ID */\n                                  window._sp_.gdpr.loadPrivacyManagerModal('${n}');\n                              }\n                          }\n                      }\n                  },\n                  onError: function() {\n                      console.log('[event] onError', arguments);\n                  },\n              }\n            }\n        }`)({isGDPRCountry:t,isUspApplicable:r,ccpaPrivacyManagerId:freestar.fsdata.ccpaPrivacyManagerId||899036,gdprPrivacyManagerId:freestar.fsdata.gdprPrivacyManagerId||899033});ee(null,null,null,n,!1),t&&ee(null,null,null,'function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var t=function(){var t,e,o=[],n=window,r=n;for(;r;){try{if(r.frames.__tcfapiLocator){t=r;break}}catch(t){}if(r===n.top)break;r=r.parent}t||(!function t(){var e=n.document,o=!!n.frames.__tcfapiLocator;if(!o)if(e.body){var r=e.createElement("iframe");r.style.cssText="display:none",r.name="__tcfapiLocator",e.body.appendChild(r)}else setTimeout(t,5);return!o}(),n.__tcfapi=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return o;"setGdprApplies"===n[0]?n.length>3&&2===parseInt(n[1],10)&&"boolean"==typeof n[3]&&(e=n[3],"function"==typeof n[2]&&n[2]("set",!0)):"ping"===n[0]?"function"==typeof n[2]&&n[2]({gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"}):o.push(n)},n.addEventListener("message",(function(t){var e="string"==typeof t.data,o={};if(e)try{o=JSON.parse(t.data)}catch(t){}else o=t.data;var n="object"===_typeof(o)&&null!==o?o.__tcfapiCall:null;n&&window.__tcfapi(n.command,n.version,(function(o,r){var a={__tcfapiReturn:{returnValue:o,success:r,callId:n.callId}};t&&t.source&&t.source.postMessage&&t.source.postMessage(e?JSON.stringify(a):a,"*")}),n.parameter)}),!1))};"undefined"!=typeof module?module.exports=t:t()}()',!1),r&&ee(null,null,null,'(function () { var e = false; var c = window; var t = document; function r() { if (!c.frames["__uspapiLocator"]) { if (t.body) { var a = t.body; var e = t.createElement("iframe"); e.style.cssText = "display:none"; e.name = "__uspapiLocator"; a.appendChild(e) } else { setTimeout(r, 5) } } } r(); function p() { var a = arguments; __uspapi.a = __uspapi.a || []; if (!a.length) { return __uspapi.a } else if (a[0] === "ping") { a[2]({ gdprAppliesGlobally: e, cmpLoaded: false }, true) } else { __uspapi.a.push([].slice.apply(a)) } } function l(t) { var r = typeof t.data === "string"; try { var a = r ? JSON.parse(t.data) : t.data; if (a.__cmpCall) { var n = a.__cmpCall; c.__uspapi(n.command, n.parameter, function (a, e) { var c = { __cmpReturn: { returnValue: a, success: e, callId: n.callId } }; t.source.postMessage(r ? JSON.stringify(c) : c, "*") }) } } catch (a) { } } if (typeof __uspapi !== "function") { c.__uspapi = p; __uspapi.msgHandler = l; c.addEventListener("message", l, false) } })();',!1),ee("https://cdn.privacy-mgmt.com/unified/wrapperMessagingWithoutDetection.js")}const _=["tcloaded","useractioncomplete"];let x=!1,C=0;const P=function({data:e}){const{eventStatus:t}=e;if(_.includes(t)){const{purpose:t,vendor:r}=e,n=t?t.consents:void 0,i=r?r.consents:void 0;return function({consents:e}){freestar.consentManagement.consentData={consents:{1:e?e[1]:void 0,10:e?e[10]:void 0}}}({consents:n}),function(e,...t){return!(!e||!t)&&t.every((t=>!!e[t]))}(n,1,10)&&function(e,...t){return!(!e||!t)&&t.every((t=>!!e[t]))}(i,850)}};function B({isTCF:e}){if(void 0===freestar.fsdata.comscore||!1!==freestar.fsdata.comscore){window._comscore=window._comscore||[];const t={c1:"2",c2:"23384447"};e||(t.cs_ucfr=""),_comscore.push(t),ee("https://sb.scorecardresearch.com/beacon.js")}}const M=function(e,t){if("cmpuishown"===e.eventStatus)return;const r=P({data:e});B({isTCF:!0}),t?!x&&r&&(x=!0,te()):freestar.log(1,"Error: TCF Callback Failed")},N=function(){return C++,50===C?(clearTimeout(freestar.timers.tcfapi),freestar.timers.tcfapi=null,void B({isTCF:!1})):C<50&&!window.__tcfapi?(freestar.timers||(freestar.timers={}),void(freestar.timers.tcfapi=setTimeout(N,500))):(freestar.timers&&freestar.timers.tcfapi&&(clearTimeout(freestar.timers.tcfapi),freestar.timers.tcfapi=null),void window.__tcfapi("addEventListener",2,M))};const O="FREESTAR",D="FS_SOURCEPOINT_PUBFIG",j=(e,t)=>{const r=e===D,n=e===O,i=Boolean(window.__tcfapi),s=Boolean(window.__uspapi),o=E(t)&&!s,a=A(t)&&!i;r&&(o||a)?R(t):n&&(o||a)&&function(){const e=freestar.fsdata.quantcastDomain;if(e){var t="https://cmp.quantcast.com".concat("/choice/","wZt3yQfgdwnz-","/",e,"/choice.js?tag_version=V2"),r=0;ee(t),function(){for(var e,t="__tcfapiLocator",r=[],n=window;n;){try{if(n.frames[t]){e=n;break}}catch(e){}if(n===window.top)break;n=n.parent}e||(function e(){var r=n.document,i=!!n.frames[t];if(!i)if(r.body){var s=r.createElement("iframe");s.style.cssText="display:none",s.name=t,r.body.appendChild(s)}else setTimeout(e,5);return!i}(),n.__tcfapi=function(){var e,t=arguments;if(!t.length)return r;if("setGdprApplies"===t[0])t.length>3&&2===t[2]&&"boolean"==typeof t[3]&&(e=t[3],"function"==typeof t[2]&&t[2]("set",!0));else if("ping"===t[0]){var n={gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"};"function"==typeof t[2]&&t[2](n)}else"init"===t[0]&&"object"==typeof t[3]&&(t[3]=Object.assign(t[3],{tag_version:"V2"})),r.push(t)},n.addEventListener("message",(function(e){var t="string"==typeof e.data,r={};try{r=t?JSON.parse(e.data):e.data}catch(e){}var n=r.__tcfapiCall;n&&window.__tcfapi(n.command,n.version,(function(r,i){var s={__tcfapiReturn:{returnValue:r,success:i,callId:n.callId}};t&&(s=JSON.stringify(s)),e&&e.source&&e.source.postMessage&&e.source.postMessage(s,"*")}),n.parameter)}),!1))}();var n=function(){var e=arguments;typeof window.__uspapi!==n&&setTimeout((function(){void 0!==window.__uspapi&&window.__uspapi.apply(window.__uspapi,e)}),500)};if(void 0===window.__uspapi){window.__uspapi=n;var i=setInterval((function(){r++,window.__uspapi===n&&r<3?console.warn("USP is not accessible"):clearInterval(i)}),6e3)}}else freestar.log(10,"loadQuantcast","Could not get quantcastDomain from fsdata, quantcast will not be loaded!")}(),function(e,t,r){const n=t||r;window.fsCmpInitMessage={eventType:"customEvent",args:{eventName:"PRIVACY_COMPLIANCE",eventType:`SITE_HAS_CMP=${n}`,jsonValue:JSON.stringify({cmpType:e,tcfapi:t,uspapi:r})}}}(e,i,s)},U={string:{type:"string",default:""},array:{type:"array",default:[]},object:{type:"object",default:{}},number:{type:"number",default:void 0}};function q({key:e,type:t=U.string.type}){const r=sessionStorage.getItem(e);if(t===U.object.type){if(r){const e=JSON.parse(r);if(e instanceof Object)return e}return U.object.default}if(t===U.array.type){if(r){const e=JSON.parse(r);if(Array.isArray(e))return e}return U.array.default}if(t===U.number.type){const e=Number(r);return Number.isInteger(e)?e:U.number.default}return r}function L({key:e,type:t=U.string,value:r}){r&&(t!==U.object&&t!==U.array||(r=JSON.stringify(r)),sessionStorage.setItem(e,r))}function F({key:e}){sessionStorage.removeItem(e)}var $=new class{constructor(){this.isReportingActive=q({key:f})||100*Math.random()<1,window.freestar=window.freestar||{},window.freestar.performanceMarksData=window.freestar.performanceMarksData||{pendingMarks:[],processedMarks:[]}}fetchPerformanceMarkDetails({markerName:e,compareToData:t}){const r=performance.getEntriesByName(e,"mark");if(0===r.length)return null;let n;t&&(n=performance.getEntriesByName(t,"mark"));const i=r[0];return{marker_name:i.name,absolute_time:i.startTime.toFixed(2),...this.compareMarks({mark:i,compareToPerformanceMarkData:n})}}compareMarks({mark:e,compareToPerformanceMarkData:t}){if(!t)return{};const r=(e.startTime-t[0].startTime).toFixed(2);return{compared_to:t[0].name,relative_Time:r}}fetchUserDetails(){const{deviceInfo:e,locData:t}=window.freestar,{browser:r,os:n,device:i}=e;return{...t,browser_name:r.name,browser_version:r.version,os_name:n.name,os_version:n.version,device_type:i.type}}isFirstLoad(){return null===sessionStorage.getItem("hasLoadedBefore")&&(sessionStorage.setItem("hasLoadedBefore","true"),!0)}sendPerformanceMarkerToQueue({markerName:e,compareTo:t}){if(this.isReportingActive&&!window.freestar.performanceMarksData.processedMarks.includes(e))if(window.freestar.performanceMarksData.processedMarks.push(e),0===t.length){const t=this.fetchPerformanceMarkDetails({markerName:e}),r=this.fetchUserDetails();window.freestar&&window.freestar.msg&&window.freestar.msg.que&&window.freestar.msg.que.push({eventType:"customEvent",args:{eventType:"PERFORMANCE",jsonValue:JSON.stringify({...t,...r,is_first_load:this.isFirstLoad(),pubfig_version:window.freestar.version}),eventName:e.toUpperCase()}})}else t.forEach((t=>{const r=this.fetchPerformanceMarkDetails({markerName:e,compareToData:t}),n=this.fetchUserDetails();window.freestar&&window.freestar.msg&&window.freestar.msg.que&&freestar.msg.que.push({eventType:"customEvent",args:{eventType:"PERFORMANCE",jsonValue:JSON.stringify({...r,...n,is_first_load:this.isFirstLoad(),pubfig_version:window.freestar.version}),eventName:e.toUpperCase()}})}))}pushAllPendingMarksToMsgQue(){window.freestar.performanceMarksData.pendingMarks.forEach((e=>{this.sendPerformanceMarkerToQueue(e)}))}logMark({markerName:e,compareTo:t=[],isFreestarDataCollectorInitialized:r=!0}){performance.mark(e),r&&window.freestar.deviceInfo&&window.freestar.locData?this.sendPerformanceMarkerToQueue({markerName:e,compareTo:t}):window.freestar.performanceMarksData.pendingMarks.push({markerName:e,compareTo:t})}logPerformanceMarkers(){const e=performance.getEntriesByType("mark");for(const t of e)console.log(`Mark [${t.name}]: ${t.startTime.toFixed(2)}ms`)}};const z={current:"current",fsLoadPubfigUrlparams:"fsLoadPubfigUrlparams"},V="fs-playwright-tests-script",G="fs-ab-tests-script",H="fsaltconfig",W="fs-qa";class J{constructor(){window._pubfigInstanceManagerConfig=window._pubfigInstanceManagerConfig||{},this.config=window._pubfigInstanceManagerConfig,this.fsLoadPubfigVersionUrlParams=y("fsLoadPubfigVersion")||"",this.fsAltConfigUrlParams=y("fsaltconfig"),this.isQA=y("fsdebug")}setEngineLocation(e){Object.values(z).includes(e)&&(this.config.engineLocation=e)}getEngineLocation(){return this.config.engineLocation===z.fsLoadPubfigUrlparams?`https://a.pub.network/core/pubfig/${this.fsLoadPubfigVersionUrlParams}/pubfig.engine.js`:"https://a.pub.network/core/pubfig/5daf77b7f80ca31e4b9e53efea52ec2ed0141df3/pubfig.engine.js"}checkForAlternativeInstances({isTest:e}={isTest:""}){if(this.fsLoadPubfigVersionUrlParams&&!this.config.loadPubfigVersionRedirect)return this.config.loadPubfigVersionRedirect=!0,this.setEngineLocation(z.fsLoadPubfigUrlparams),Y({id:V,src:`https://a.pub.network/core/pubfig/${this.fsLoadPubfigVersionUrlParams}/pubfig.min.js`,errorString:"PLAYWRIGHTS TEST FOUND - exiting after creating new instance..."});if(e&&e.length)return this.setEngineLocation(z.current),window.freestar.redirected=!0,Y({id:G,src:e,errorString:"AB TEST FOUND - exiting after creating new instance..."});const t=[].slice.call(document.querySelectorAll(`script#${H}`));if(this.fsAltConfigUrlParams&&0===t.length)return this.setEngineLocation(z.current),Y({id:H,src:`https://a.pub.network/${s()}/test/${this.fsAltConfigUrlParams}/pubfig.min.js?bypass=true`,errorString:"Alternate Configuration - found alt version, exiting after creating new instance..."});if(this.isQA&&!this.config.fsQaRedirect){let e;if(this.config.fsQaRedirect=!0,document.querySelectorAll("script").forEach((t=>{t.innerText.includes("qa/pubfig")&&(e=!0)})),!e)return this.setEngineLocation(z.current),Y({id:W,src:`https://a.pub.network/${s()}/qa/pubfig.min.js`,errorString:"QA version called via params - exiting after creating new instance..."})}}}let K=null;function Q(){return K||(K=new J),K}function Z(){if("object"!=typeof window.freestar.fsdata)throw new Error("The fsdata object is not properly defined, exiting...");if(window.freestar.fsdata.onlyAllowedDomains&&window.freestar.fsdata.allowedDomains&&window.freestar.fsdata.allowedDomains.length&&!function({domains:e}){let t=0===e.length;return e.forEach((e=>{0===e.indexOf("*.")&&(e=e.slice(2)),t||(t=-1!==top.location.host.indexOf(e))})),!(!t&&fsdata.onlyAllowedDomains)}({domains:window.freestar.fsdata.allowedDomains}))throw new Error("The current domain is not in the allowed domains list, exiting...");if(window.freestar.fsdata.urlBlocklist&&window.freestar.fsdata.urlBlocklist.length&&function(e){const t=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/,r=e=>{try{return new URL(e),!0}catch(e){return!1}},n=e=>{const r=e.split("/");return t.test(r[0])},{href:i,pathname:s,host:o,search:a}=top.location,c=(e,t)=>e.includes("/*")?i.includes(e.replace("/*","")):t,d=e=>"/"===e[e.length-1]?e.substring(0,e.length-1):e;return e.find((e=>r(e)?c(e,d(i)===d(e)):n(e)?c(e,d(o+s+a)===d(e)):s.includes(e)))}(window.freestar.fsdata.urlBlocklist))throw new Error("The current domain is in the blocked url list, exiting...")}function Y({id:e,src:t,errorString:r}){const n=X({type:"script",id:e,src:t});throw window.freestar.fsdata=null,document.head.appendChild(n),new Error(r)}function X({type:e="div",classList:t=[],id:r=!1,src:n=!1,name:i=!1,attributes:s=[]}){const o=document.createElement(e);return t.length&&(o.className=t.join(" ")),n&&(o.src=n),r&&(o.id=r),i&&o.setAttribute("name",i),s.length&&s.forEach((e=>{const t=Object.keys(e)[0];o.setAttribute(t,e[t])})),o}function ee(e,t,r=null,n,i=!0){try{const s=X({type:"script",attributes:[{"data-owner":"freestar"}]});e&&(s.src=e),n&&(s.textContent=n),r&&(s.id=r),i&&(s.async=i),s.type="text/javascript",t&&(s.onload=t),document.getElementsByTagName("head")[0].appendChild(s)}catch(e){}}function te(){if($.logMark({markerName:m.pubfigEngineLoadInit}),freestar.modulesLoaded.engine)return freestar.log(0,"========== ENGINE ALREADY LOADED =========="),!1;let e=window.fsprebid||{};if(window.fsprebid=e,e.que=e.que||[],e.retries=0,freestar.fsdata.disallowedGeos&&freestar.fsdata.disallowedGeos.length&&freestar.fsdata.disallowedGeos.includes(freestar.locData.iso))freestar.log(0,"Ad serving is blocked in "+freestar.locData.iso);else{if(freestar.modulesLoaded.engine)return freestar.log(0,"========== ENGINE ALREADY LOADED =========="),!1;ee(Q().getEngineLocation(),re)}}function re(){freestar.globalUnderscore&&(window._=freestar.globalUnderscore)}function ne(e){Math.random()<.01&&freestar.msg.que.push({eventType:"customEvent",args:{eventName:"PUBFIG_NOT_LOADED",eventType:e||"",jsonValue:JSON.stringify({domain:window.location.hostname})}})}function ie(){!function(){if(window.freestar.config.disabledProducts)for(const e in window.freestar.config.disabledProducts)Object.prototype.hasOwnProperty.call(window.freestar.config.disabledProducts,e)&&(void 0===window.freestar.config.products[e]?console.error(`Freestar product name: ${e} does not exist.`):window.freestar.config.products[e].disabled=window.freestar.config.disabledProducts[e])}(),r.indexOf(freestar.locData.iso)>-1?N():(B({isTCF:!1}),te())}var se="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function oe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ae(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var ce=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===de}(e)}(e)};var de="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function le(e,t){return!1!==t.clone&&t.isMergeableObject(e)?he((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function ue(e,t,r){return e.concat(t).map((function(e){return le(e,r)}))}function fe(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function pe(e,t){try{return t in e}catch(e){return!1}}function ge(e,t,r){var n={};return r.isMergeableObject(e)&&fe(e).forEach((function(t){n[t]=le(e[t],r)})),fe(t).forEach((function(i){(function(e,t){return pe(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(pe(e,i)&&r.isMergeableObject(t[i])?n[i]=function(e,t){if(!t.customMerge)return he;var r=t.customMerge(e);return"function"==typeof r?r:he}(i,r)(e[i],t[i],r):n[i]=le(t[i],r))})),n}function he(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||ue,r.isMergeableObject=r.isMergeableObject||ce,r.cloneUnlessOtherwiseSpecified=le;var n=Array.isArray(t);return n===Array.isArray(e)?n?r.arrayMerge(e,t,r):ge(e,t,r):le(t,r)}he.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return he(e,r,t)}),{})};var me=oe(he);let we=y("fsdebug"),be=[];we&&"true"!==we&&!Number.isInteger(+we)&&(be=we.split(",").map((e=>e.toUpperCase())));const ye=(e,...t)=>{let r="Pubfig",n="background: #00C389; color: #fff; border-radius: 3px; padding: 3px";"object"==typeof e&&(r=e.title?e.title:r,n=e.styles?e.styles:n,e=void 0!==e.level?e.level:1),(freestar.debug>=e&&0===be.length||be.includes(r.toUpperCase()))&&console.info(`%c${r}: `,n,...t)},ve={title:"Pubfig"};class ke{constructor(){this.logs=[]}add(e){this.logs.push(e)}show(e=ve){if(!freestar.log)return;if(0===this.logs.length)return;let t=this.logs;this.logs=[],freestar.log(e,`\n${t.join("\n")}`)}}let Se;const Ie=new Uint8Array(16);function Te(){if(!Se&&(Se="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Se))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Se(Ie)}const Ee=[];for(let e=0;e<256;++e)Ee.push((e+256).toString(16).slice(1));var Ae={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Re(e,t,r){if(Ae.randomUUID&&!t&&!e)return Ae.randomUUID();const n=(e=e||{}).random||(e.rng||Te)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return Ee[e[t+0]]+Ee[e[t+1]]+Ee[e[t+2]]+Ee[e[t+3]]+"-"+Ee[e[t+4]]+Ee[e[t+5]]+"-"+Ee[e[t+6]]+Ee[e[t+7]]+"-"+Ee[e[t+8]]+Ee[e[t+9]]+"-"+Ee[e[t+10]]+Ee[e[t+11]]+Ee[e[t+12]]+Ee[e[t+13]]+Ee[e[t+14]]+Ee[e[t+15]]}(n)}const _e=20,xe="adRefreshRate",Ce="visibilityRefreshTime";function Pe(e,t){if(e.refreshOptIn&&function(e){return!(!e||null==e.turboActive)&&e.turboActive}(t)){const r=function(e){return e&&e.percentReduction}(t);freestar.log(20,`TURBO MODE active! Applying ${r}% reduction to refresh rates!`);const n=(e,t)=>function(e,t,r,n){if(null==e||Number.isNaN(e)||e<=0)return freestar.log(20,`TURBO: ${n} refreshRate ${e} unchanged`),e;let i=Math.floor(e*(100-t)/100);return(null==i||Number.isNaN(i)||i<r)&&(i=r),freestar.log(20,`TURBO: ${n} ${e} has been updated to ${i}`),i}(e,r,_e,t);Object.prototype.hasOwnProperty.call(e,xe)&&(e[xe]=n(e[xe],xe)),Object.prototype.hasOwnProperty.call(e,Ce)&&(e[Ce]=n(e[Ce],Ce))}}const Be=class{static createInstance({ClassConstructor:e,instanceName:t}){if(window.freestar=window.freestar||{},window.freestar.instances=window.freestar.instances||{},window.freestar.instances[t])return window.freestar.instances[t];const r=new e;return window.freestar.instances[t]=r,r}static getInstanceFn({ClassConstructor:e,instanceName:t}){return()=>this.createInstance({ClassConstructor:e,instanceName:t})}}.getInstanceFn({ClassConstructor:class{constructor(){this.results={},this.ongoingRequests=new Map}clearClassCachedData({requestId:e}){Object.prototype.hasOwnProperty.call(this.results,e)&&delete this.results[e]}async fetch({fetchFn:e,requestId:t,onError:r,onSuccess:n}){if(this.results[t])return this.results[t];if(!this.ongoingRequests.has(t)){const i=e().then((e=>{const r={data:e,error:null};return this.results[t]=r,n&&n(e),r}),(e=>{const n={data:null,error:e};return this.results[t]=n,r&&r(e),n}));this.ongoingRequests.set(t,i)}return this.ongoingRequests.get(t).finally((()=>{this.ongoingRequests.delete(t)}))}},instanceName:"requestHandler"});function Me({key:e}){const t=q({key:e,type:U.object.type});if(t){const{value:r,expiry:n}=t;if(n&&!(n<Date.now()))return r;F({key:e})}return null}function Ne({key:e,value:t}){!function({key:e,value:t,expiry:r}){L({key:e,type:U.object,value:{value:t,expiry:r}})}({key:e,value:t,expiry:Date.now()+36e5})}const Oe="fs.session";const De=new class{constructor(){this.known=0,this.init()}init(){const e=JSON.parse(q({key:Oe}));e&&e.known&&(this.known=1)}update(){if(this.known)return;const e=this.computeIsKnownValue(),t=JSON.parse(q({key:Oe}));let r=null;null==t?r={known:e}:(null==t.known||!t.known&&e)&&(r=Object.assign({},t,{known:e})),r&&L({key:Oe,type:U.object,value:r}),this.known=e}isKnownByPrebidUser(){return Boolean(window.fsprebid&&window.fsprebid.getUserIds&&0!==Object.keys(window.fsprebid.getUserIds()).length)}computeIsKnownValue(){return Number(this.isKnownByPrebidUser())}isKnown(){return this.known!=this.computeIsKnownValue()&&this.update(),this.known}};var je,Ue,qe={exports:{}};je=qe,Ue=qe.exports,function(e,t){var r="function",n="undefined",i="object",s="string",o="major",a="model",c="name",d="type",l="vendor",u="version",f="architecture",p="console",g="mobile",h="tablet",m="smarttv",w="wearable",b="embedded",y="Amazon",v="Apple",k="ASUS",S="BlackBerry",I="Browser",T="Chrome",E="Firefox",A="Google",R="Huawei",_="LG",x="Microsoft",C="Motorola",P="Opera",B="Samsung",M="Sharp",N="Sony",O="Xiaomi",D="Zebra",j="Facebook",U="Chromium OS",q="Mac OS",L=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},F=function(e,t){return typeof e===s&&-1!==$(t).indexOf($(e))},$=function(e){return e.toLowerCase()},z=function(e,t){if(typeof e===s)return e=e.replace(/^\s\s*/,""),typeof t===n?e:e.substring(0,350)},V=function(e,n){for(var s,o,a,c,d,l,u=0;u<n.length&&!d;){var f=n[u],p=n[u+1];for(s=o=0;s<f.length&&!d&&f[s];)if(d=f[s++].exec(e))for(a=0;a<p.length;a++)l=d[++o],typeof(c=p[a])===i&&c.length>0?2===c.length?typeof c[1]==r?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==r||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):t:this[c[0]]=l?c[1].call(this,l,c[2]):t:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):t):this[c]=l||t;u+=2}},G=function(e,r){for(var n in r)if(typeof r[n]===i&&r[n].length>0){for(var s=0;s<r[n].length;s++)if(F(r[n][s],e))return"?"===n?t:n}else if(F(r[n],e))return"?"===n?t:n;return e},H={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},W={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[u,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[u,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,u],[/opios[\/ ]+([\w\.]+)/i],[u,[c,P+" Mini"]],[/\bopr\/([\w\.]+)/i],[u,[c,P]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,u],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[u,[c,"UC"+I]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[u,[c,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[u,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[u,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[u,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[u,[c,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+I],u],[/\bfocus\/([\w\.]+)/i],[u,[c,E+" Focus"]],[/\bopt\/([\w\.]+)/i],[u,[c,P+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[u,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[u,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[u,[c,P+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[u,[c,"MIUI "+I]],[/fxios\/([-\w\.]+)/i],[u,[c,E]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 "+I]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 "+I],u],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],u],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[c,u],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,j],u],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,u],[/\bgsa\/([\w\.]+) .*safari\//i],[u,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[u,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[u,[c,T+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,T+" WebView"],u],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[u,[c,"Android "+I]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,u],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[u,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[u,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[u,G,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,u],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],u],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[u,[c,E+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[c,u],[/(cobalt)\/([\w\.]+)/i],[c,[u,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,$]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",$]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,$]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[a,[l,B],[d,h]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[a,[l,B],[d,g]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[a,[l,v],[d,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[a,[l,v],[d,h]],[/(macintosh);/i],[a,[l,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[a,[l,M],[d,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[a,[l,R],[d,h]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[a,[l,R],[d,g]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[a,/_/g," "],[l,O],[d,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[a,/_/g," "],[l,O],[d,h]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[a,[l,"OPPO"],[d,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[a,[l,"Vivo"],[d,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[a,[l,"Realme"],[d,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[a,[l,C],[d,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[a,[l,C],[d,h]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[a,[l,_],[d,h]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[a,[l,_],[d,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[a,[l,"Lenovo"],[d,h]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[a,/_/g," "],[l,"Nokia"],[d,g]],[/(pixel c)\b/i],[a,[l,A],[d,h]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[a,[l,A],[d,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[l,N],[d,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[a,"Xperia Tablet"],[l,N],[d,h]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[a,[l,"OnePlus"],[d,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[a,[l,y],[d,h]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[a,/(.+)/g,"Fire Phone $1"],[l,y],[d,g]],[/(playbook);[-\w\),; ]+(rim)/i],[a,l,[d,h]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[a,[l,S],[d,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[a,[l,k],[d,h]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[a,[l,k],[d,g]],[/(nexus 9)/i],[a,[l,"HTC"],[d,h]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[l,[a,/_/g," "],[d,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[a,[l,"Acer"],[d,h]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[a,[l,"Meizu"],[d,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[l,a,[d,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[l,a,[d,h]],[/(surface duo)/i],[a,[l,x],[d,h]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[a,[l,"Fairphone"],[d,g]],[/(u304aa)/i],[a,[l,"AT&T"],[d,g]],[/\bsie-(\w*)/i],[a,[l,"Siemens"],[d,g]],[/\b(rct\w+) b/i],[a,[l,"RCA"],[d,h]],[/\b(venue[\d ]{2,7}) b/i],[a,[l,"Dell"],[d,h]],[/\b(q(?:mv|ta)\w+) b/i],[a,[l,"Verizon"],[d,h]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[a,[l,"Barnes & Noble"],[d,h]],[/\b(tm\d{3}\w+) b/i],[a,[l,"NuVision"],[d,h]],[/\b(k88) b/i],[a,[l,"ZTE"],[d,h]],[/\b(nx\d{3}j) b/i],[a,[l,"ZTE"],[d,g]],[/\b(gen\d{3}) b.+49h/i],[a,[l,"Swiss"],[d,g]],[/\b(zur\d{3}) b/i],[a,[l,"Swiss"],[d,h]],[/\b((zeki)?tb.*\b) b/i],[a,[l,"Zeki"],[d,h]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[l,"Dragon Touch"],a,[d,h]],[/\b(ns-?\w{0,9}) b/i],[a,[l,"Insignia"],[d,h]],[/\b((nxa|next)-?\w{0,9}) b/i],[a,[l,"NextBook"],[d,h]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,"Voice"],a,[d,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[l,"LvTel"],a,[d,g]],[/\b(ph-1) /i],[a,[l,"Essential"],[d,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[a,[l,"Envizen"],[d,h]],[/\b(trio[-\w\. ]+) b/i],[a,[l,"MachSpeed"],[d,h]],[/\btu_(1491) b/i],[a,[l,"Rotor"],[d,h]],[/(shield[\w ]+) b/i],[a,[l,"Nvidia"],[d,h]],[/(sprint) (\w+)/i],[l,a,[d,g]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[l,x],[d,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[a,[l,D],[d,h]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[a,[l,D],[d,g]],[/smart-tv.+(samsung)/i],[l,[d,m]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[l,B],[d,m]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[l,_],[d,m]],[/(apple) ?tv/i],[l,[a,v+" TV"],[d,m]],[/crkey/i],[[a,T+"cast"],[l,A],[d,m]],[/droid.+aft(\w+)( bui|\))/i],[a,[l,y],[d,m]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[a,[l,M],[d,m]],[/(bravia[\w ]+)( bui|\))/i],[a,[l,N],[d,m]],[/(mitv-\w{5}) bui/i],[a,[l,O],[d,m]],[/Hbbtv.*(technisat) (.*);/i],[l,a,[d,m]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[l,z],[a,z],[d,m]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,a,[d,p]],[/droid.+; (shield) bui/i],[a,[l,"Nvidia"],[d,p]],[/(playstation [345portablevi]+)/i],[a,[l,N],[d,p]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[a,[l,x],[d,p]],[/((pebble))app/i],[l,a,[d,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[a,[l,v],[d,w]],[/droid.+; (glass) \d/i],[a,[l,A],[d,w]],[/droid.+; (wt63?0{2,3})\)/i],[a,[l,D],[d,w]],[/(quest( 2| pro)?)/i],[a,[l,j],[d,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[l,[d,b]],[/(aeobc)\b/i],[a,[l,y],[d,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[a,[d,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[a,[d,h]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,h]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,g]],[/(android[-\w\. ]{0,9});.+buil/i],[a,[l,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[u,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[u,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,u],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[u,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,u],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[c,[u,G,H]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[c,"Windows"],[u,G,H]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[u,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,q],[u,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[u,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,u],[/\(bb(10);/i],[u,[c,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[u,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[u,[c,E+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[u,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[u,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[u,[c,T+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,U],u],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,u],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],u],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,u]]},J=function(p,m){if(typeof p===i&&(m=p,p=t),!(this instanceof J))return new J(p,m).getResult();var w=typeof e!==n&&e.navigator?e.navigator:t,b=p||(w&&w.userAgent?w.userAgent:""),y=w&&w.userAgentData?w.userAgentData:t,v=m?function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r}(W,m):W,k=w&&w.userAgent==b;return this.getBrowser=function(){var e={};return e[c]=t,e[u]=t,V.call(e,b,v.browser),e[o]=function(e){return typeof e===s?e.replace(/[^\d\.]/g,"").split(".")[0]:t}(e[u]),k&&w&&w.brave&&typeof w.brave.isBrave==r&&(e[c]="Brave"),e},this.getCPU=function(){var e={};return e[f]=t,V.call(e,b,v.cpu),e},this.getDevice=function(){var e={};return e[l]=t,e[a]=t,e[d]=t,V.call(e,b,v.device),k&&!e[d]&&y&&y.mobile&&(e[d]=g),k&&"Macintosh"==e[a]&&w&&typeof w.standalone!==n&&w.maxTouchPoints&&w.maxTouchPoints>2&&(e[a]="iPad",e[d]=h),e},this.getEngine=function(){var e={};return e[c]=t,e[u]=t,V.call(e,b,v.engine),e},this.getOS=function(){var e={};return e[c]=t,e[u]=t,V.call(e,b,v.os),k&&!e[c]&&y&&"Unknown"!=y.platform&&(e[c]=y.platform.replace(/chrome os/i,U).replace(/macos/i,q)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return b},this.setUA=function(e){return b=typeof e===s&&e.length>350?z(e,350):e,this},this.setUA(b),this};J.VERSION="1.0.36",J.BROWSER=L([c,u,o]),J.CPU=L([f]),J.DEVICE=L([a,l,d,p,g,m,h,w,b]),J.ENGINE=J.OS=L([c,u]),je.exports&&(Ue=je.exports=J),Ue.UAParser=J;var K=typeof e!==n&&(e.jQuery||e.Zepto);if(K&&!K.ua){var Q=new J;K.ua=Q.getResult(),K.ua.get=function(){return Q.getUA()},K.ua.set=function(e){Q.setUA(e);var t=Q.getResult();for(var r in t)K.ua[r]=t[r]}}}("object"==typeof window?window:se);var Le=qe.exports;const Fe=new class{constructor(){this.initManager()}initManager(){window.freestar=window.freestar||{},this._setDeviceType()}_setDeviceType(){window.freestar.deviceInfo=Le.UAParser(),window.freestar.deviceInfo.device.type||(window.freestar.deviceInfo.device={type:"desktop"})}getFormattedDeviceType(){if(window.freestar)return"Apple"===window.freestar.deviceInfo.device.vendor?"smartphone-ios":window.freestar.deviceInfo.device.type}},$e="4e799501-b8b6-4ef1-bad5-225b3dd1aa8d",ze="https://api.floors.dev/sgw/v1/floors",Ve="https://optimise.net/",Ge="fs.idealadstack.config";function He(){return window.freestar.fsdata.domain||location.host}const We=async()=>{if(!Me({key:Ge})){let e=await fetch(`${Ve}?k=${De.isKnown()}&d=${He()}&t=${Fe.getFormattedDeviceType()}${y("fsiasdebug")?"&g=experiment":""}`,{method:"GET",credentials:"include",headers:{"x-api-key":$e}});const t=e.headers;e=await e.text(),e=JSON.parse(e);const{testGroup:r}=e,n={testGroup:r,roundTripTime:t.get("fs-client-rtt"),...e.config};return Ne({key:Ge,value:n}),n}};async function Je(e,t,r,n,i){const s=He(),o="Apple"===e?"smartphone-ios":t,a=De.isKnown(),c=n&&null!=i?`&mb=${i}&au=${encodeURIComponent(n)}`:"",d=fetch(`${ze}?${`d=${s}&t=${o}&k=${a}&r=${r}${c}`}`,{headers:{"x-api-key":$e}}),l=await d;return await l.json()}const Ke="fs.config";function Qe({data:e,dataPath:t}){const r=function(e,t,r){if(!t)return;const n=(Array.isArray(t)?t:t.match(/([^[.\]])+/g)).reduce(((e,t)=>e&&e[t]),e);return void 0===n?r:n}(e,t);if(r)return"location"===t?{iso:r.countryCode,city:r.cityName,state:r.state}:r}async function Ze({callback:e}){const t=await fetch(`https://a.pub.network/${s()}/fsdata.json`);if(!t.ok){const e=`No data returned from fsdata fallback endpoint: ${t.status}`;throw new Error(e)}const r=await t.json();r?(window.freestar.fsdata=r,window.freestar.locData=!1,window.freestar.networkMap=!1,e(null,!0)):e({error:"No data returned from fsdata endpoint"})}function Ye(){const e=window.location.search.includes("fsdebug"),t=y("fsaltconfig"),r=y("fstesturl"),n={env:"PROD",version:!1};return e?(n.env="QA",I({isActive:!0})):t&&t>0&&(n.env="TEST",n.version=t),r.length&&freestar.queue.push((function(){googletag.pubads().set("page_url",r)})),n}function Xe({pubfigSettings:e}){const{abTest:t}=e;if(t&&!window.freestar.redirected){const{testGroup:r,testId:n,testType:i,testVariantId:s}=t;if(`${r}`.length&&L({key:u,value:`${r}`,type:U.string}),n&&L({key:f,value:n,type:U.string}),s&&L({key:g,value:s,type:U.string}),i&&(L({key:p,value:i,type:U.string}),"PUBFIG_TEMPLATE"===i&&e.pubfigLocation))return L({key:h,value:e.pubfigLocation,type:U.string}),e.pubfigLocation}return!1}const et=[{owner:"google",ua:"googlebot"},{owner:"google",ua:"mediapartners-google"},{owner:"google",ua:"adsbot-google"},{owner:"bing",ua:"bingbot"},{owner:"yahoo",ua:"slurp"},{owner:"duckduckgo",ua:"duckduckbot"},{owner:"baidu",ua:"baiduspider"},{owner:"yandex",ua:"yandexbot"},{owner:"exabot",ua:"konqueror/3.5"},{owner:"exabot",ua:"Exabot/3.0"},{owner:"facebook",ua:"facebot"},{owner:"facebook",ua:"facebookexternalhit/1.0"},{owner:"facebook",ua:"facebookexternalhit/1.1"},{owner:"alexa",ua:"ia_archiver"}];async function tt(){!function(){let e=window.freestar||{};window.freestar=e,e.log=ye,e.msg={},sessionStorage.setItem("fs.session",JSON.stringify({id:Re()}))}(),await Ze({callback:()=>{ee(`https://a.pub.network/core/analytics/${e.builds.analytics}/analytics.min.js`,(()=>{window.freestar.analytics.track({type:"customEvent",args:{eventName:"BOT_DETECTED",eventType:"botDetected",jsonValue:JSON.stringify({detected:!0})}})}))}})}function rt(e,t){throw tt(),v({botCookieName:e,value:!0}),`pubfig code disabled as the user agent ${t} is a bot`}const nt=["click","scroll"],it={},st=()=>void 0!==window.freestar.config.pageSpeedOptimized?window.freestar.config.pageSpeedOptimized:window.freestar.fsdata.pageSpeedOptimized,ot=()=>{nt.forEach((e=>document.removeEventListener(e,ot)))},at=({name:e,callback:t})=>{it[e].waiting&&!it[e].called&&(it[e].called=!0,ot(),t())},ct=({name:e,callback:t})=>{Object.prototype.hasOwnProperty.call(it,e)||(it[e]={waiting:!0},nt.forEach((r=>document.addEventListener(r,at.bind(null,{name:e,callback:t}),{once:!0}))))},dt=()=>{!function(){let e;e=window.googletag||{},e.cmd=e.cmd||[],window.googletag=e,e.cmd.push((()=>{const t=q({key:u});t&&e.pubads().setTargeting("tg",t),e.pubads().setTargeting("fs_session_id",freestar.msg.sessionId),e.pubads().setTargeting("fs_pageview_id",freestar.msg.pageId)}))}(),window.googletag&&!window.googletag.apiReady&&ee("https://securepubads.g.doubleclick.net/tag/js/gpt.js")};var lt={exports:{}};var ut,ft={exports:{}},pt=ae(Object.freeze({__proto__:null,default:{}}));function gt(){return ut||(ut=1,function(e,t){var r;e.exports=(r=r||function(e,t){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==se&&se.crypto&&(r=se.crypto),!r)try{r=pt}catch(e){}var n=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),s={},o=s.lib={},a=o.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=o.WordArray=a.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var s=0;s<i;s++){var o=r[s>>>2]>>>24-s%4*8&255;t[n+s>>>2]|=o<<24-(n+s)%4*8}else for(var a=0;a<i;a+=4)t[n+a>>>2]=r[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(n());return new c.init(t,e)}}),d=s.enc={},l=d.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new c.init(r,t/2)}},u=d.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new c.init(r,t)}},f=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},p=o.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,i=n.words,s=n.sigBytes,o=this.blockSize,a=s/(4*o),d=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,l=e.min(4*d,s);if(d){for(var u=0;u<d;u+=o)this._doProcessBlock(i,u);r=i.splice(0,d),n.sigBytes-=l}return new c.init(r,l)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=p.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new g.HMAC.init(e,r).finalize(t)}}});var g=s.algo={};return s}(Math),r)}(ft)),ft.exports}!function(e,t){var r;e.exports=(r=gt(),function(e){var t=r,n=t.lib,i=n.WordArray,s=n.Hasher,o=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=o.MD5=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var s=this._hash.words,o=e[t+0],c=e[t+1],p=e[t+2],g=e[t+3],h=e[t+4],m=e[t+5],w=e[t+6],b=e[t+7],y=e[t+8],v=e[t+9],k=e[t+10],S=e[t+11],I=e[t+12],T=e[t+13],E=e[t+14],A=e[t+15],R=s[0],_=s[1],x=s[2],C=s[3];R=d(R,_,x,C,o,7,a[0]),C=d(C,R,_,x,c,12,a[1]),x=d(x,C,R,_,p,17,a[2]),_=d(_,x,C,R,g,22,a[3]),R=d(R,_,x,C,h,7,a[4]),C=d(C,R,_,x,m,12,a[5]),x=d(x,C,R,_,w,17,a[6]),_=d(_,x,C,R,b,22,a[7]),R=d(R,_,x,C,y,7,a[8]),C=d(C,R,_,x,v,12,a[9]),x=d(x,C,R,_,k,17,a[10]),_=d(_,x,C,R,S,22,a[11]),R=d(R,_,x,C,I,7,a[12]),C=d(C,R,_,x,T,12,a[13]),x=d(x,C,R,_,E,17,a[14]),R=l(R,_=d(_,x,C,R,A,22,a[15]),x,C,c,5,a[16]),C=l(C,R,_,x,w,9,a[17]),x=l(x,C,R,_,S,14,a[18]),_=l(_,x,C,R,o,20,a[19]),R=l(R,_,x,C,m,5,a[20]),C=l(C,R,_,x,k,9,a[21]),x=l(x,C,R,_,A,14,a[22]),_=l(_,x,C,R,h,20,a[23]),R=l(R,_,x,C,v,5,a[24]),C=l(C,R,_,x,E,9,a[25]),x=l(x,C,R,_,g,14,a[26]),_=l(_,x,C,R,y,20,a[27]),R=l(R,_,x,C,T,5,a[28]),C=l(C,R,_,x,p,9,a[29]),x=l(x,C,R,_,b,14,a[30]),R=u(R,_=l(_,x,C,R,I,20,a[31]),x,C,m,4,a[32]),C=u(C,R,_,x,y,11,a[33]),x=u(x,C,R,_,S,16,a[34]),_=u(_,x,C,R,E,23,a[35]),R=u(R,_,x,C,c,4,a[36]),C=u(C,R,_,x,h,11,a[37]),x=u(x,C,R,_,b,16,a[38]),_=u(_,x,C,R,k,23,a[39]),R=u(R,_,x,C,T,4,a[40]),C=u(C,R,_,x,o,11,a[41]),x=u(x,C,R,_,g,16,a[42]),_=u(_,x,C,R,w,23,a[43]),R=u(R,_,x,C,v,4,a[44]),C=u(C,R,_,x,I,11,a[45]),x=u(x,C,R,_,A,16,a[46]),R=f(R,_=u(_,x,C,R,p,23,a[47]),x,C,o,6,a[48]),C=f(C,R,_,x,b,10,a[49]),x=f(x,C,R,_,E,15,a[50]),_=f(_,x,C,R,m,21,a[51]),R=f(R,_,x,C,I,6,a[52]),C=f(C,R,_,x,g,10,a[53]),x=f(x,C,R,_,k,15,a[54]),_=f(_,x,C,R,c,21,a[55]),R=f(R,_,x,C,y,6,a[56]),C=f(C,R,_,x,A,10,a[57]),x=f(x,C,R,_,w,15,a[58]),_=f(_,x,C,R,T,21,a[59]),R=f(R,_,x,C,h,6,a[60]),C=f(C,R,_,x,S,10,a[61]),x=f(x,C,R,_,p,15,a[62]),_=f(_,x,C,R,v,21,a[63]),s[0]=s[0]+R|0,s[1]=s[1]+_|0,s[2]=s[2]+x|0,s[3]=s[3]+C|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var s=e.floor(n/4294967296),o=n;r[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,d=0;d<4;d++){var l=c[d];c[d]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function d(e,t,r,n,i,s,o){var a=e+(t&r|~t&n)+i+o;return(a<<s|a>>>32-s)+t}function l(e,t,r,n,i,s,o){var a=e+(t&n|r&~n)+i+o;return(a<<s|a>>>32-s)+t}function u(e,t,r,n,i,s,o){var a=e+(t^r^n)+i+o;return(a<<s|a>>>32-s)+t}function f(e,t,r,n,i,s,o){var a=e+(r^(t|~n))+i+o;return(a<<s|a>>>32-s)+t}t.MD5=s._createHelper(c),t.HmacMD5=s._createHmacHelper(c)}(Math),r.MD5)}(lt);var ht=oe(lt.exports);const mt=({placement:e,type:t})=>{let r=e&&e[t]&&null!=e[t].active&&!1!==e[t].active;return!(r||!("dynamicAdOptionsV2"===t&&e[t].dynamicAd2||"pushdownOptions"===t&&e[t].isPushdownUnit||"sideWallOptions"===t&&0!==e[t].type||"stickyAdOptions"===t&&e[t].stickyAdEnabled||"stickyFooterOptions"===t&&Object.keys(e[t]).length>0&&!1!==e[t].active))||r};function wt({slotId:e}){function t(){const t=yr({name:e});return t&&t.name?t.name:"unknown"}return e?freestar.dynamicSlotLibrary&&freestar.dynamicSlotLibrary[e]?freestar.dynamicSlotLibrary[e]:(freestar.dynamicSlotLibrary&&freestar.dynamicSlotLibrary[e],t()):"unknown"}function bt({path:e}){return e?window.freestar.dynamicPathLibrary.find((t=>t.path===e)):"unknown"}function yt({slotId:e=null,path:t=null}){return e?wt({slotId:e}):!!t&&bt({path:t})}function vt(e){const t=window.freestar.dynamicSlotLibrary[e];t&&(e=t);const r=yr({name:yt({slotId:e})});return function({placement:e,refreshRate:t}){if(freestar.config&&freestar.config.products&&e){let r=!1;if(["stickyFooter","sideWall","pushdown","stickyFooter","revolvingRail","dynamicAd"].forEach((n=>{if(freestar.config.products[n]){const i=mt({placement:e,type:`${n}Options`}),{refreshDisabled:s,refreshInterval:o}=freestar.config.products[n];i&&(s&&(r=!0),o&&o>15&&(t=o))}})),r)return 0}return t}({placement:r,refreshRate:r&&r.ignoreSiteRefresh?r.adRefreshRate:window.freestar.fsdata.adRefreshRate})}var kt=Function.prototype.toString,St=Object.create,It=Object.prototype.toString,Tt=function(){function e(){this._keys=[],this._values=[]}return e.prototype.has=function(e){return!!~this._keys.indexOf(e)},e.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},e.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},e}();var Et="undefined"!=typeof WeakMap?function(){return new WeakMap}:function(){return new Tt};function At(e){if(!e)return St(null);var t=e.constructor;if(t===Object)return e===Object.prototype?{}:St(e);if(~kt.call(t).indexOf("[native code]"))try{return new t}catch(e){}return St(e)}var Rt="g"===/test/g.flags?function(e){return e.flags}:function(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function _t(e){var t=It.call(e);return t.substring(8,t.length-1)}var xt="undefined"!=typeof Symbol?function(e){return e[Symbol.toStringTag]||_t(e)}:_t,Ct=Object.defineProperty,Pt=Object.getOwnPropertyDescriptor,Bt=Object.getOwnPropertyNames,Mt=Object.getOwnPropertySymbols,Nt=Object.prototype,Ot=Nt.hasOwnProperty,Dt=Nt.propertyIsEnumerable,jt="function"==typeof Mt;var Ut=jt?function(e){return Bt(e).concat(Mt(e))}:Bt;function qt(e,t,r){for(var n=Ut(e),i=0,s=n.length,o=void 0,a=void 0;i<s;++i)if("callee"!==(o=n[i])&&"caller"!==o)if(a=Pt(e,o)){a.get||a.set||(a.value=r.copier(a.value,r));try{Ct(t,o,a)}catch(e){t[o]=a.value}}else t[o]=r.copier(e[o],r);return t}function Lt(e,t){return e.slice(0)}function Ft(e,t){var r=new t.Constructor;return t.cache.set(e,r),e.forEach((function(e,n){r.set(n,t.copier(e,t))})),r}var $t=jt?function(e,t){var r=At(t.prototype);for(var n in t.cache.set(e,r),e)Ot.call(e,n)&&(r[n]=t.copier(e[n],t));for(var i=Mt(e),s=0,o=i.length,a=void 0;s<o;++s)a=i[s],Dt.call(e,a)&&(r[a]=t.copier(e[a],t));return r}:function(e,t){var r=At(t.prototype);for(var n in t.cache.set(e,r),e)Ot.call(e,n)&&(r[n]=t.copier(e[n],t));return r};function zt(e,t){return new t.Constructor(e.valueOf())}function Vt(e,t){return e}function Gt(e,t){var r=new t.Constructor;return t.cache.set(e,r),e.forEach((function(e){r.add(t.copier(e,t))})),r}var Ht=Array.isArray,Wt=Object.assign,Jt=Object.getPrototypeOf||function(e){return e.__proto__},Kt={array:function(e,t){var r=new t.Constructor;t.cache.set(e,r);for(var n=0,i=e.length;n<i;++n)r[n]=t.copier(e[n],t);return r},arrayBuffer:Lt,blob:function(e,t){return e.slice(0,e.size,e.type)},dataView:function(e,t){return new t.Constructor(Lt(e.buffer))},date:function(e,t){return new t.Constructor(e.getTime())},error:Vt,map:Ft,object:$t,regExp:function(e,t){var r=new t.Constructor(e.source,Rt(e));return r.lastIndex=e.lastIndex,r},set:Gt},Qt=Wt({},Kt,{array:function(e,t){var r=new t.Constructor;return t.cache.set(e,r),qt(e,r,t)},map:function(e,t){return qt(e,Ft(e,t),t)},object:function(e,t){var r=At(t.prototype);return t.cache.set(e,r),qt(e,r,t)},set:function(e,t){return qt(e,Gt(e,t),t)}});function Zt(e){var t=function(e){return{Arguments:e.object,Array:e.array,ArrayBuffer:e.arrayBuffer,Blob:e.blob,Boolean:zt,DataView:e.dataView,Date:e.date,Error:e.error,Float32Array:e.arrayBuffer,Float64Array:e.arrayBuffer,Int8Array:e.arrayBuffer,Int16Array:e.arrayBuffer,Int32Array:e.arrayBuffer,Map:e.map,Number:zt,Object:e.object,Promise:Vt,RegExp:e.regExp,Set:e.set,String:zt,WeakMap:Vt,WeakSet:Vt,Uint8Array:e.arrayBuffer,Uint8ClampedArray:e.arrayBuffer,Uint16Array:e.arrayBuffer,Uint32Array:e.arrayBuffer,Uint64Array:e.arrayBuffer}}(Wt({},Kt,e)),r=t.Array,n=t.Object;function i(e,i){if(i.prototype=i.Constructor=void 0,!e||"object"!=typeof e)return e;if(i.cache.has(e))return i.cache.get(e);if(i.prototype=Jt(e),i.Constructor=i.prototype&&i.prototype.constructor,!i.Constructor||i.Constructor===Object)return n(e,i);if(Ht(e))return r(e,i);var s=t[xt(e)];return s?s(e,i):"function"==typeof e.then?e:n(e,i)}return function(e){return i(e,{Constructor:void 0,cache:Et(),copier:i,prototype:void 0})}}Zt(Wt({},Qt,{}));var Yt=Zt({});const Xt={title:"IDEAL AD STACK v3.0"};window.freestar=window.freestar||{};const er=new class{constructor(){this.active=!0,this.config={},this.configByRtt=null,this.errors=[],this.logs=new ke,this.checkingForUserState=!1,this.bindEvents(),this.firstInit=this.init(),this.setupBypassFirstAuction()}setConfig(e){this.config=e,this.configByRtt=null}getApiUrl(){return`${Ve}?k=${De.isKnown()}&d=${He()}&t=${Fe.getFormattedDeviceType()}${y("fsiasdebug")?"&g=experiment":""}`}sendErrorMessage(){window.freestar.msg.que.push({eventType:"customEvent",args:{eventName:"DYNAMIC_AUCTION_TIMEOUT_TEST",eventType:"ERRORS",jsonValue:JSON.stringify({errors:this.errors.join(", ")})}})}bindEvents(){window.freestar&&window.freestar.queue&&window.freestar.queue.push((()=>{window.fsprebid.onEvent("auctionEnd",(()=>{this.checkForUserStateChange()}))}))}async init(){this.logs.add("Checking session storage for exsiting config...");let e=Me({key:Ge});e?(this.logs.add("Config found in session storage..."),this.setConfig(e)):(this.logs.add(`Config not found, making a request to ${this.getApiUrl()}`),this.setConfig(await this.requestConfig()),void 0===this.config.inAuctionTimeoutSegment&&(this.config.inAuctionTimeoutSegment=Math.random()<1)),this.validAPIResponse()?(this.logs.add(`Checking if user is in Dynamic Auction Timeout test: ${this.config.inAuctionTimeoutSegment}`),this.config.inAuctionTimeoutSegment&&(window.freestar.msg=window.freestar.msg||{},window.freestar.msg.que=window.freestar.msg.que||[],window.freestar.msg.que.push({eventType:"customEvent",args:{eventName:"DYNAMIC_AUCTION_TIMEOUT_TEST",eventType:"RESULTS",jsonValue:JSON.stringify({clientMask:this.getConfigByRtt().clientServerMask})}})),Ne({key:Ge,value:this.config})):(this.logs.add("Config invalid!",JSON.stringify(this.config)),F({key:Ge})),this.setKVPs(),this.checkingForUserState=!1,this.logs.show(Xt)}isInDynamicAuctionTimeoutTest(){return this.config.inAuctionTimeoutSegment}getConfigByRtt(){return null==this.configByRtt&&this.setConfigByRtt(),this.configByRtt}setConfigByRtt(){let e,t;if(null!=this.config.roundTripTime&&(t=Number(this.config.roundTripTime),!Number.isNaN(t)&&this.config.clientServerRTT))for(const r of this.config.clientServerRTT)t<r.lessThan&&(null==e||e.lessThan>r.lessThan)&&(e=r);this.configByRtt=(e||this).config}getActiveClientBidders(){if(!this.active)return[];let{clientServer:e={}}=this.getConfigByRtt();return Object.keys(e).filter((t=>"client"===e[t]))}getActiveServerBidders(){if(!this.active)return[];let{clientServer:e={}}=this.getConfigByRtt();return Object.keys(e).filter((t=>"server"===e[t]))}getActiveBidders(){return[...this.getActiveClientBidders()].concat(this.getActiveServerBidders())}getInactiveBidders(){if(!this.active)return[];let{clientServer:e={}}=this.getConfigByRtt();return Object.keys(e).filter((t=>"off"===e[t]))}getAllBidders(){let{clientServer:e={}}=this.config;return Object.keys(e)}getServerToServerDetails(){if(!this.active)return{};let{testGroup:e}=this.config,{clientServerMask:t}=this.getConfigByRtt();const r=this.getActiveServerBidders();return{activeBidders:this.getActiveBidders(),serverToServerNetworks:r,clientServerMask:t,testGroup:e}}getDynamicAuctionTimeoutDetails(){const{inAuctionTimeoutSegment:e=!1,maxTimeout:t=window.freestar.fsdata.timeout,roundTripTime:r=null}=this.config;return{inAuctionTimeoutSegment:e,maxTimeout:t,roundTripTime:r}}getMaxAuctionTimeout(){const{maxTimeout:e}=this.getDynamicAuctionTimeoutDetails();return e}async requestConfig(){const{data:e,error:t}=await Be().fetch({requestId:"getIdealData",fetchFn:We});return t&&(this.active=!1,this.errors.push(t.toString())),e||{}}async checkForUserStateChange(){if(this.checkingForUserState)return;this.checkingForUserState=!0;(Number(googletag.pubads().getTargeting("floors_user").toString())||0)!==De.isKnown()?(F({key:Ge}),await this.init()):this.checkingForUserState=!1}setKVPs(){const{roundTripTime:e=null}=this.getDynamicAuctionTimeoutDetails(),{clientServerMask:t=null,testGroup:r=null}=this.getServerToServerDetails();freestar.queue.push((()=>{googletag.pubads().setTargeting("floors_user",String(De.isKnown())),e&&googletag.pubads().setTargeting("floors_rtt",`${e}`),t&&googletag.pubads().setTargeting("fs_clientservermask",`${t}`),r&&googletag.pubads().setTargeting("fs_testgroup",`${r}`)})),this.logs.add(`fs_clientservermask: ${t}\nfs_testgroup: ${r}\nfloors_user: ${De.isKnown()}\nfloors_rtt: ${e}`)}validAPIResponse(){let e=!0;return 0===this.errors.length&&(0===Object.keys(this.config).length?this.errors.push("no params"):void 0===this.config.maxTimeout&&this.errors.push("no maxTimeout")),0!==this.errors.length&&(e=!1,this.logs.add(`Config Errors: ${this.errors.join(", ")}`),this.sendErrorMessage()),this.active=e,e}getFirstInit(){return this.firstInit}async getFloorsData(){return await this.getFirstInit(),this.config&&this.config.floors}getBypassFirstAuction(){const e=this.getConfigByRtt();return!!e&&"off"===e.preGAMAuction}async setupBypassFirstAuction(){await this.getFirstInit(),this.getBypassFirstAuction()&&fsprebid&&fsprebid.que&&fsprebid.que.push((function(){fsprebid.removeAdUnit()}))}getFeatureConfig(){return this.config&&this.config.features||{}}allowBrowsi(){return"off"!==this.getFeatureConfig().browsi}allowConfiant(){return"off"!==this.getFeatureConfig().confiant}allowBlockthrough(){return"off"!==this.getFeatureConfig().blockthrough}};function tr(e){return e.bidders&&e.bidders.some((({bidder:e})=>"amazon"===e))}function rr(e){let t=mr();for(let r=0;r<t.length;r++)if(t[r].dfpId===e)return t[r];return null}function nr(e){let t=[];if(e)for(let r=0;r<e.length;r++){let n=null;try{n=freestar.dynamicSlotLibrary[e[r].getSlotElementId()],n&&(n=yr({name:n})),n||(n=freestar.fsdata.placements.filter((t=>{if(e[r].getSlotElementId()===t.slotId)return t})),0===n.length&&(n=null)),n||(n=rr(e[r].getAdUnitPath()))}catch(e){freestar.log(1,`Error: ${e}`)}if(n&&tr(n)){const i=n.sizeMappings.find((e=>hr()>=e.viewport.size[0]));let s=i?i.size:[];if(s.length>0&&(s=s.filter((e=>35843!==e[0]))),s.length>0){const n=e[r],i={slotID:n.getSlotElementId(),slotName:n.getAdUnitPath(),sizes:s};t.push(Yt(i))}}}else t=mr().filter((e=>tr(e)&&function(e){if(!e.validAdSizes||!e.bidders||0===e.bidders.length||e.stickyFooter||e.dynamicAd)return!1;return function(e){return void 0===freestar.config||void 0===freestar.config.enabled_slots||function(e,t){for(let r=0;r<e.length;r++)if(e[r].placementName===t){if("complete"!==document.readyState)return!0;if(window.document.getElementById(t))return!0}return!1}(freestar.config.enabled_slots,e.name)}(e)}(e))).map((e=>function(e){const t=e.sizeMappings.find((e=>hr()>=e.viewport.size[0]));let r=t?t.size:[];return r=r.filter((e=>35843!==e[0])),Yt({slotID:e.name,slotName:e.dfpId,sizes:r})}(e)));return t}function ir(e,t,r,n){if(!(e=function({elementIds:e}){return e&&e.length?(Array.isArray(e)||(e=[e]),!(!e||!e.length)&&e):freestar.fsdata.placements.map((e=>{if(e.validAdSizes&&!e.stickyFooter&&!e.pushdownUnit&&0===e.sideWallType&&document.getElementById(e.name))return e.name})).filter((e=>void 0!==e))}({elementIds:e}))||!e.length)return;!function(e){const{name:t,detail:r}=e,n=new CustomEvent(t,{detail:r});window.dispatchEvent(n)}({name:"auctionStarted",detail:!0}),$.logMark({markerName:m.pubfigPrebidFsRequestBids});const i=r||window.freestar.fsdata.timeout,s={prebid:!1,aps:!1,adserverRequestSent:!1};function o(e){freestar.debug&&freestar.debug>24&&"prebid"===e&&setTimeout((()=>{(()=>{const e=fsprebid.getBidResponses(),t=fsprebid.getAllWinningBids(),r=[];Object.keys(e).forEach((function(n){e[n].bids.forEach((function(e){r.push({bid:e,adunit:n,adId:e.adId,bidder:e.bidder,time:e.timeToRespond,dims:`${e.width}x${e.height}`,cpm:e.cpm,msg:e.status,rendered:!!t.find((function(t){return t.adId==e.adId}))})}))}))})()}),1500),freestar.log(1," ("+freestar.requestReference.requestNum+") Bidder back:",e),s.prebid&&s.aps&&d()}function a(e){let t,r,n=!0;const i=fsprebid.getBidResponses()[e.domId],s=yr({name:yt({slotId:e.placementName})});return i&&s?(r=function(e,t){const r=Math.max(...e.map(t));return e.find((e=>t(e)===r))}(i.bids,(function(e){return Number(e.cpm)})),t=s[`floor${freestar.deviceInfo.device.type.charAt(0).toUpperCase()+freestar.deviceInfo.device.type.slice(1)}`],T(t)&&t>0&&r&&r.cpm&&r.cpm<t&&(n=!1),n):n}function c(e){return freestar.dynamicSlotLibrary[e]?freestar.dynamicSlotLibrary[e]:e}function d(){!0!==s.adserverRequestSent&&(s.adserverRequestSent=!0,freestar.requestReference.bidTimer&&clearTimeout(freestar.requestReference.bidTimer),freestar.log(2," ("+freestar.requestReference.requestNum+") Sending adserver request!"),googletag.cmd.push((function(){const t={activeIds:[],activeSlots:[]};if(Array.isArray(e)&&e.length){const r=[];freestar.log(2," ("+freestar.requestReference.requestNum+") Refresh Only:",e),freestar.amazonNetwork&&apstag.setDisplayBids(e),e.forEach((e=>{let t=document.getElementById(e);if(t){const e=yr({name:yt({slotId:t.getAttribute("name")})});e&&r.push(e.name)}}));const n=function(){const t={activeIds:[],activeSlots:[]};return e.forEach((e=>{const r=gr({elementId:e});r&&t.activeSlots.push(r),a({placementName:c(e),domId:e})&&t.activeIds.push(e)})),t}();t.activeIds=n.activeIds,t.activeSlots=n.activeSlots}else freestar.log(2," ("+freestar.requestReference.requestNum+") Refresh All!"),freestar.amazonNetwork&&apstag.setDisplayBids(),t.activeIds=function(){const e=[];return pr().forEach((t=>{const r=t.getSlotElementId();freestar.bidsWon&&freestar.bidsWon[r]&&!freestar.bidsWon[r]&&(freestar.bidsWon[r].evaluated=!0,a({placementName:c(r),domId:r})&&e.push(r))})),e}();const r=function(){let e=k({name:"_fs-test"});return e&&(e=JSON.parse(e),e.items.some(((t,r)=>{t==e.selection&&(e.selected=r,e.testGroup=t.indexOf("ab_test")>-1?1:0)}))),e}();r&&(freestar.log(1,"Part of an A/B test... ",r),function({key:e,value:t}){window.googletag.pubads&&window.googletag.pubads().setTargeting(e,t)}({key:"fs_test_variant_id",value:String(r.testGroup)})),t.activeSlots.length&&(t.activeIds.length&&fsprebid.setTargetingForGPTAsync(t.activeIds),function(e){if(freestar.debug<50)return;freestar.log(25,"GPT Targeting - START ************************");let t=googletag.pubads().getTargetingKeys();for(let e=0;e<t.length;e++){let r=googletag.pubads().getTargeting(t[e]);freestar.log(25,"GPT Targeting - "+t[e]+" = "+r)}e?Array.isArray(e)||(e=[e]):e=pr();for(let r=0;r<e.length;r++){let n=e[r],i=n.getSlotElementId();t=n.getTargetingKeys();for(let e=0;e<t.length;e++){let r=n.getTargeting(t[e]);freestar.log(25," GPT Targeting - Slot ("+i+")- "+t[e]+" = "+r)}}freestar.log(25," GPT Targeting - END **************************")}(t.activeSlots),function(e){!0===freestar.googletagCorrelatorUpdate?(googletag.pubads().refresh(e),freestar.googletagCorrelatorUpdate=!1):googletag.pubads().refresh(e,{changeCorrelator:!1})}(t.activeSlots),function(e=pr()||[]){if(freestar.debug<2)return;e.forEach((e=>function(e,t){const r=document.getElementById(e);if(r){let e=X("div"),n=document.createTextNode("FS - "+t);e.appendChild(n),r.insertBefore(e,r.childNodes[0])}}(e.getSlotElementId(),e.getAdUnitPath())))}(t.activeSlots)),n&&n()})))}freestar.requestReference.bidTimer=null,freestar.requestReference.requestNum=++freestar.bidRequestNum,function(e,t,r){freestar.amazonNetwork&&e.length?freestar.amazonNetwork&&(freestar.log(1,"valid Amazon Slots :",e),apstag.fetchBids({slots:e,timeout:r||1e3},(function(e){freestar.log(1," ("+freestar.requestReference.requestNum+") aps bids:",e),s.aps=!0,o("aps")}))):(freestar.log(1,"no valid Amazon Slots : no amazon bidding"),s.aps=!0,o("aps"));const n={timeout:r||1e3,bidsBackHandler:function(e){freestar.log(1," ("+freestar.requestReference.requestNum+") prebid bid responses:",e),s.prebid=!0,o("prebid")}};t&&(n.adUnitCodes=t),fsprebid.que.push((function(){fsprebid.requestBids(n)}))}(nr(t),e,i),freestar.requestReference.bidTimer=window.setTimeout((function(){freestar.log(1," ("+freestar.requestReference.requestNum+") TIMEOUT!"),function({adUnitCodesWithNoBids:e,isTimeout:t}){pr().forEach((r=>{if(t)r.setTargeting("fsbid","timeout");else if(e){const t=r.getAdUnitPath(),n=wr({adUnitPath:t});n&&e.indexOf(n.name)>-1&&r.setTargeting("fsbid","0")}}))}({isTimeout:!0}),d()}),i)}const sr={root:null,threshold:.5};let or=new class{observe(){return null}unobserve(){return null}disconnect(){return null}};"IntersectionObserver"in window&&(or=new IntersectionObserver((function(e){e.forEach((e=>{const t=freestar.refreshLibrary[e.target.id];if(t){const r=ar.getRefreshCounter(t),n=ar.getRefreshTime(t,e.target.id);if(n<=0||r<0)return;r>=n&&e.isIntersecting&&e.intersectionRatio>.49&&(freestar.refreshLibrary[e.target.id].viewabilityThresholdMet=!0)}}))}),sr));class ar{constructor(e){freestar.log(25,"REFRESH V2 Enabled"),this.slots=e||pr(),this.time={},this.observers={},this.time.default=window.freestar.fsdata.adRefreshRate||0,this.bidTimeout=window.freestar.fsdata.timeout,this.getPlacementAdRefreshRate=vt,freestar.refreshLibraryCreator=ar.refreshLibraryCreator,this.onLoad(e)}onLoad(e){for(let t=0;t<this.slots.length;t++){const r=this.slots[t]?this.slots[t].getSlotElementId():void 0;if(ar.refreshLibraryCreator(r),e&&e.length>0&&this.slots[t]){const e=yr({name:yt({slotId:r})});this.observers[r]||e.outOfPage||(or.observe(document.getElementById(r)),this.observers[r]=!0),ar.refresh(r,document.getElementById(r))}}window.setInterval(function(){if(document.hasFocus())for(const e in freestar.refreshLibrary){const t=document.getElementById(e);t&&(this.counter(t),this.observers[e]||(this.observers[e]=!0,or.observe(t)))}}.bind(this),1e3)}static refreshLibraryCreator(e,t){e&&(Array.isArray(e)||(e=[e]),t=t||void 0,e.forEach((e=>{window.freestar.refreshLibrary[e]||(window.freestar.refreshLibrary[e]={});const r=yr({name:yt({slotId:e})});if(!r)return void freestar.log(20,"refreshLibraryCreator","Cannot find placement for ad slot",e);const n=window.freestar.refreshLibrary[e];if(n.viewabilityThresholdMet=!1,n.refreshTime&&T(n.refreshTime)||(window.freestar.adRefresher&&window.freestar.adRefresher.getPlacementAdRefreshRate?n.refreshTime=Number(window.freestar.adRefresher.getPlacementAdRefreshRate(e)):n.refreshTime=Number(vt(e))),n.refreshCounter&&T(n.refreshCounter)||(n.refreshCounter=t||0),n.viewPercentage&&T(n.viewPercentage)||(n.viewPercentage=100),!n.disableRefresh||(i=n.disableRefresh)!==!!i){n.disableRefresh=!1;const t=document.getElementById(e);(t&&-1===Number(t.getAttribute("data-refresh-time"))||!0===r.outOfPage)&&(n.disableRefresh=!0)}var i;n.timesRefreshed&&T(n.timesRefreshed)||(n.timesRefreshed=0),r.interstitialOptions&&!0===r.interstitialOptions.active&&(n.disableRefresh=!0)})))}static isActive(e){return function(e){let t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,r=e.getBoundingClientRect().top+Math.trunc(e.scrollHeight/2);return r>0&&r<=t}(e)?(window.freestar.refreshLibrary[e.id].viewPercentage=100,!0):(window.freestar.refreshLibrary[e.id].viewPercentage=0,!1)}static getRefreshTime(e,t){let r=e.refreshTime;return(void 0===r||isNaN(r)||null===r)&&(r=vt(t),freestar.log(25," ","freestar.fsdata.adRefreshRate",r)),r}static getRefreshCounter(e){let t=e.refreshCounter;return(void 0===t||isNaN(t))&&(t=0),t}counter(e){const t=freestar.refreshLibrary[e.id],r=yr({name:yt({slotId:e.id})});if(r&&r.lazyAd&&!t.hasIntersectLazyAd)return void(t.refreshCounter=0);if(t.disableRefresh)return;const n=ar.getRefreshTime(t,e.id);let i=ar.getRefreshCounter(t);if(!(n<=0||i<0)){if(i+=1,i>=.8*n){const t=gr({elementId:e.id});t&&t.setTargeting("fs_uuid",br()),window.freestar.fsdata.isTriple13Enabled&&!freestar.refreshLibrary[e.id].floorsRefreshed&&(freestar.refreshLibrary[e.id].timesRefreshed+=1,r&&lr.getFloorsData({placement:r,slotId:e.id,callback:({result:r})=>{freestar.refreshLibrary[e.id].timesRefreshed-=1,r&&(freestar.refreshLibrary[e.id].floorsRefreshed=!0,t&&(Object.keys(r).forEach((e=>{t.setTargeting(e,r[e])})),freestar.log({title:"FLOORS"},e.id,"Refreshed floors value.",r)))}})),er.checkForUserStateChange()}t.refreshCounter=i,freestar.log({title:"REFRESH"},e.id,t.refreshCounter),i>=n&&(ar.isActive(e)||!0===t.viewabilityThresholdMet)&&(freestar.refreshLibrary[e.id].timesRefreshed+=1,t.viewabilityThresholdMet=!1,freestar.refreshLibrary[e.id].floorsRefreshed=!1,freestar.currentStickyFooter&&freestar.currentStickyFooter.placement&&e.id===freestar.currentStickyFooter.placement.name?(freestar.log({title:"REFRESH"},e.id,"Refreshing sticky footer ad slot..."),freestar.currentStickyFooter.stickyFooterRefresh()):(freestar.log({title:"REFRESH"},e.id,"Refreshing standard ad slot..."),(e=>{let t=freestar.fsdata.adRefreshRate;try{t=freestar.adRefresher.getPlacementAdRefreshRate(null!==e.getAttribute("name")?e.getAttribute("name"):e.id)}catch(e){freestar.log(1,`Error: ${e}`)}freestar.refreshLibrary[e.id].refreshTime=t})(e),freestar.refreshLibrary[e.id].refreshCounter=0,ar.refresh(e.id)))}}static refresh(e){ar.refreshSlots({slotIds:[e]},!1)}static refreshSlots({slotIds:e}={slotIds:null},t=!0){t&&console.warn("freestar.freestarReloadAdSlot() has been deprecated and will be removed in the future use freestar.refreshAllSlots()"),freestar.log(1,`${e?"freestar.refresh":"freestar.refreshAllSlots"}${e?" : "+e:null}`),function(e=null){const t=null!=e?e:Object.keys(window.freestar.rebidControl);t.forEach((e=>function(e){const t=window.freestar.rebidControl[e];t&&(t.setTargeting(0),delete window.freestar.rebidControl[e])}(e)))}(e),window.fsprebid.que.push((function(){const t=[],r=pr().map((function(r){if(r){let n=r.getSlotElementId();if(freestar.refreshLibrary[n]||ar.refreshLibraryCreator(n),freestar.refreshLibrary[n].refreshCounter++,freestar.refreshLibrary[n].dataRefreshId=br(),freestar.refreshSlots.push({refreshId:freestar.refreshLibrary[n].dataRefreshId}),!e||e.indexOf(n)>-1)return freestar.refreshLibrary[n].viewabilityThresholdMet=!1,t.push(n),r.setTargeting("fsrefresh",`${freestar.refreshLibrary[n].timesRefreshed}`),r}})).filter((e=>void 0!==e));e&&!t.length||ir(t,r)}))}}class cr{constructor(){this.slotMaxBids={},this.slotToPlacement={},this.placementToSlots={}}initiateWatcher(e){e.que.push((()=>{e.onEvent("bidResponse",this.handleBidResponse.bind(this))}))}handleBidResponse(e){this.addSlotPlacementAssociation(e.adUnitCode),this.addBidResponse(e)}addSlotPlacementAssociation(e){if(e&&!this.slotToPlacement[e]){const t=yt({slotId:e});t&&(this.slotToPlacement[e]=t,this.placementToSlots[t]||(this.placementToSlots[t]=[]),this.placementToSlots[t].push(e))}}addBidResponse(e){const{adUnitCode:t,cpm:r}=e;t&&r&&(!this.slotMaxBids[t]||this.slotMaxBids[t]<r)&&(this.slotMaxBids[t]=r)}getSlotMaxBid(e){return cr.validateMaxBid(this.slotMaxBids[e])}getPlacementMaxBidBySlot(e){const t=this.slotToPlacement[e];return this.getPlacementMaxBid(t)}getPlacementMaxBid(e){const t=this.placementToSlots[e]||[];return cr.validateMaxBid(Math.max(...t.map((e=>this.getSlotMaxBid(e)))))}static validateMaxBid(e){return!Number.isNaN(e)&&null!=e&&e>0?e:null}}let dr=null;const lr=new class{constructor(e,t){this.idealAdStackManager=e,this.maxBidTracker=t,this.initialData=null,this.requests=[],this.maxBidRequests={}}async getInitialFloorsData(){const{timestamp:e,floors:t}=this.getRequest(0);return this.initialData?await t:this.initialData={timestamp:e,floors:await t},this.initialData}getRequest(e,t,r){return t&&null!=r?(this.maxBidRequests[t.name]||(this.maxBidRequests[t.name]=[null]),this.maxBidRequests[t.name][e]||(this.maxBidRequests[t.name][e]=[]),this.maxBidRequests[t.name][e].find((e=>e.maxBid===r))||this.maxBidRequests[t.name][e].push({maxBid:r,timestamp:new Date,floors:this.fetchData(e,t.dfpId,r)}),this.maxBidRequests[t.name][e].find((e=>e.maxBid===r))):(this.requests[e]||(this.requests[e]={timestamp:new Date,floors:this.fetchData(e)}),this.requests[e])}getRequestUrl(e,t,r,n,i){const s=He(),o="Apple"===e?"smartphone-ios":t,a=De.isKnown(),c=n&&null!=i?`&mb=${i}&au=${encodeURIComponent(n)}`:"";return`${ze}?${`d=${s}&t=${o}&k=${a}&r=${r}${c}`}`}async fetchData(e,t,r){let n;if(0===e){const e=await this.idealAdStackManager.getFloorsData();e&&!e.error&&e.length>0&&(n=e)}if(!n){let i;if(0===e)({data:n,error:i}=await Be().fetch({requestId:"getFloorsData",fetchFn:()=>Je(window.freestar.deviceInfo.device.vendor,window.freestar.deviceInfo.device.type,e,t,r)})),Be().clearClassCachedData({requestId:"getFloorsData"});else try{n=await Je(window.freestar.deviceInfo.device.vendor,window.freestar.deviceInfo.device.type,e,t,r)}catch(e){i=e}if(i){const s=t&&null!=r?`, placement ${t}, maxBid ${r}`:"";freestar.log(40,`Floors request for refresh ${e}${s} error`,i.toString()),n=[]}}const{error:i,message:s}=n;return i&&(freestar.msg.que.push({eventType:"customEvent",args:{eventName:"FLOORS_ERROR",eventType:"FETCH_RESPONSE",jsonValue:JSON.stringify({message:s})}}),n=[]),n}getFloor(e,t,r){const n=t.find((e=>r.dfpId===e.adUnit)),i=n?n.upr:"timeout",s=n?new Date(n.lastUpdated):e;return{floors_id:i,floors_hour:String(s.getUTCHours())}}getInitialFloorKVP({placement:e,keyMap:t}){return t||(t={}),Object.assign(t,this.getFloor(this.initialData.timestamp,this.initialData.floors,e))}async getFloorsData({placement:e,slotId:t,callback:r,isRebid:n=!1}){let i,s;if(!window.freestar.fsdata.isTriple13Enabled)return i=null,s="inactive",void r({result:i,reason:s});const o=(function(e){const t=freestar.refreshLibrary[e];if(t)return t.timesRefreshed}(t)||0)+(n?1:0);let a,c;if(0===o||n)({timestamp:a,floors:c}=this.getRequest(o));else{const r=this.maxBidTracker.getSlotMaxBid(t);({timestamp:a,floors:c}=this.getRequest(o,e,r))}i=this.getFloor(a,await c,e),s=null,r&&r({result:i,reason:s})}}(er,(null==dr&&(dr=new cr),dr));class ur{constructor({placement:e=null,prebid:t=null,slot:r=null}){this.placement=e,this.prebid=t,this.slot=r,this.trackers={adIds:[]}}update({prebid:e=null,slot:t=null}){e&&(this.prebid=e),t&&(this.slot=t)}getWinningBid(){let e=null;return this.prebid?(e=fsprebid.getAllWinningBids().filter((e=>this.prebid&&e.adUnitCode===this.prebid.code&&-1===this.trackers.adIds.indexOf(e.adId))).map((e=>e.adId))[0]||null,e&&(this.trackers.adIds=this.trackers.adIds.concat(e)),e):e}}const fr=new class{constructor(){this.adUnits=[],this.init()}init(){this.bindEvents()}add({placement:e=null,prebid:t=null,slot:r=null}){let n=!1;this.adUnits.some((e=>r&&e.prebid&&e.prebid.code===r.getSlotElementId()?(e.update({slot:r}),n=!0,!0):t&&e.slot&&e.slot.getSlotElementId()===t.code?(e.update({prebid:t}),n=!0,!0):void 0)),n||(e||(t&&(e=yr({name:wt({slotId:t.code})})),r&&(e=yr({name:bt({path:r.getAdUnitPath()}).placementName}))),e&&this.adUnits.push(new ur({placement:e,prebid:t,slot:r})))}bindEvents(){window.freestar&&window.freestar.queue&&window.freestar.queue.push((()=>{window.fsprebid.onEvent("auctionInit",(e=>{this.handleEventAuctionInit({data:e})})),window.fsprebid.onEvent("auctionEnd",(e=>{this.handleEventAuctionEnd({data:e})})),window.googletag.pubads().addEventListener("slotRequested",(e=>{this.handleEventSlotRequestedEnded({data:e})})),window.googletag.pubads().addEventListener("slotRenderEnded",(e=>{this.handleEventSlotRenderEnded({data:e})}))}))}getAdUnitByPrebidCode({code:e}){let t=!1;return this.adUnits.some((r=>{const{prebid:n}=r;if(n&&n.code===e)return t=r,!0})),t}getAdUnitBySlotElementId({elementId:e}){let t=!1;return this.adUnits.some((r=>{const{slot:n}=r;if(n&&n.getSlotElementId()===e)return t=r,!0})),t}getAdUnitBySlotAdUnitPath({adUnitPath:e}){let t=!1;return this.adUnits.some((r=>{const{slot:n}=r;if(n&&n.getAdUnitPath()===e)return t=r,!0})),t}createAuctionStartMessage({adUnit:e,data:t}){const{userIds:r}=fsprebid.getConfig("userSync"),{auctionId:n=null}=t,i=e.prebid&&e.slot?"PREBID-GAM":e.prebid&&!e.slot?"PREBID":!e.prebid&&e.slot?"GAM":null;let s=e.slot.getTargetingMap();s=Object.keys(s).map((e=>`${e}=${s[e]}`));const o={seen:!1,eventType:"auctionStart",args:{placementId:e.placement.name,DfpId:e.slot.getAdUnitPath(),auctionId:n,auctionType:i,location:freestar.locData,userIds:r.map((e=>e.name)),kvps:s}};window.freestar.msg.que.push(o)}handleEventAuctionInit({data:e}){const{adUnits:t}=e;t.forEach((t=>{const{code:r}=t;(t=this.getAdUnitByPrebidCode({code:r}))&&this.createAuctionStartMessage({adUnit:t,data:e})}))}handleEventSlotRequestedEnded({data:e}){const{slot:t}=e,r=this.getAdUnitBySlotAdUnitPath({adUnitPath:t.getAdUnitPath()});r&&!r.prebid&&this.createAuctionStartMessage({adUnit:r,data:e})}createAuctionEndMessage({adUnit:e,data:t}){const r=setTimeout((()=>{clearTimeout(r);const{userIds:n}=fsprebid.getConfig("userSync"),{auctionId:i=null,advertiserId:s=null,campaignId:o=null,isEmpty:a=null,lineItemId:c=null,serviceName:d=null,size:l=[],sourceAgnosticCreativeId:u=null,sourceAgnosticLineItemId:f=null}=t,p=e.prebid&&e.slot?"PREBID-GAM":e.prebid&&!e.slot?"PREBID":!e.prebid&&e.slot?"GAM":null;let g=e.slot.getTargetingMap();g=Object.keys(g).map((e=>`${e}=${g[e]}`));const h=e.getWinningBid(),m={seen:!1,eventType:"auctionEnd",args:{placementId:e.placement.name,DfpId:e.slot.getAdUnitPath(),auctionId:i,auctionType:p,location:freestar.locData,userIds:n.map((e=>e.name)),kvps:g,winningBid:h,advertiserId:s,campaignId:o,isEmpty:a,lineItemId:c,serviceName:d,size:JSON.stringify(l),sourceAgnosticCreativeId:u,sourceAgnosticLineItemId:f}};window.freestar.msg.que.push(m)}),500)}handleEventAuctionEnd({data:e}){const{adUnits:t}=e;t.forEach((t=>{const{code:r}=t;(t=this.getAdUnitByPrebidCode({code:r}))&&!t.slot&&this.createAuctionEndMessage({adUnit:t,data:e})}))}handleEventSlotRenderEnded({data:e}){const{slot:t}=e,r=this.getAdUnitBySlotElementId({elementId:t.getSlotElementId()});r&&this.createAuctionEndMessage({adUnit:r,data:e})}};function pr(){return window.googletag.pubads&&window.googletag.pubads().getSlots()}function gr({elementId:e}){if(e)return pr().filter((t=>t.getSlotElementId()===e))[0]}window.freestar&&window.freestar.queue&&window.freestar.queue.push((()=>{window.freestar.adUnitManager=fr}));function hr(){return window.innerWidth&&document.documentElement.clientWidth?Math.min(window.innerWidth,document.documentElement.clientWidth):window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth}function mr(){return freestar.fsdata.placements}U.array.type;const wr=({adUnitPath:e})=>window.freestar.fsdata.placements.find((t=>e===t.dfpId)),br=()=>Re();const yr=({name:e})=>window.freestar.fsdata.placements.filter((t=>t.name===e))[0],vr="fs.session";const kr=new class{constructor(){this.session=null,this.init()}init(){this.session=q({key:vr}),this.session?this.session=JSON.parse(this.session):this.session={id:br()};let e=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].map((e=>({key:e,value:y(e)}))).filter((e=>""!==e.value));if(0!==e.length){let t={};e.forEach((e=>{t[e.key]=e.value})),this.session.utm=t}L({key:vr,type:U.object,value:this.session})}getSessionId(){return this.session.id}getUTMValue(e){return this.session.utm?this.session.utm[e]:null}};function Sr(){if(freestar.fsdata&&freestar.fsdata.hashEnabled){const e=k({name:"fs.identifier.hash"});return window.location.hash=e&&e.length?e:function(){const e=function(){let e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxxxx".replace(/[x]/g,(function(){let t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),t.toString(16)}))}();return v({name:"fs.identifier.hash",value:e,expires:1825,path:"/"}),e}(),window.location.hash}return""}function Ir(){freestar.msg=freestar.msg||{},freestar.msg.que=freestar.msg.que||[],freestar.msg.pageId=ht(window.location.href+freestar.hitTime+freestar.msg.fpc).toString(),freestar.msg.processing=freestar.msg.processing||!1,freestar.msg.round=freestar.msg.round||0,freestar.msg.loadTime=freestar.msg.loadTime||0,freestar.msg.hash=Sr(),freestar.msg.sessionId=kr.getSessionId(),window.fsCmpInitMessage&&(freestar.msg.que.push(window.fsCmpInitMessage),freestar.log(10,window.fsCmpInitMessage.args.eventName,window.fsCmpInitMessage.args.eventType,window.fsCmpInitMessage.args.jsonValue),delete window.fsCmpInitMessage)}$.logMark({markerName:m.pubfigLoaded,isFreestarDataCollectorInitialized:!1});const Tr=new URLSearchParams(window.location.search);!function(){if(y("fsdisable"))throw new Error("pubfig disabled.")}();if(function(e){const t="fs.bot.found",r=k({name:t});r&&!0===Boolean(r)?rt(t,e):e&&!r&&(et.forEach((r=>{RegExp(r.ua.toLowerCase()).test(e.toLowerCase())&&rt(t,e)})),v({name:t,value:!1}))}(navigator.userAgent||window.navigator.userAgent),function(){let e=window.freestar||{};window.freestar=e,e.log=ye,e.version="5.34.7",e.hitTime=e.hitTime||Date.now(),e.queue=e.queue||[],e.config=e.config||{},e.config.products=e.config.products?me(i,e.config.products):i,e.config.enabled_slots=e.config.enabled_slots||[],e.modulesLoaded=e.modulesLoaded||{engine:!1,messaging:!1,pubfig:!1,prebid:!1},e.msg={},e.msg.collectorURL=window.freestarUrl||"https://c.pub.network",e.msg.dispensaryURL=window.dispensaryUrl||t,e.consentManagement={consentData:{}},e.newAdSlots=function(t,r=null){e.loaded||ne("newAdSlots"),e.queue.push((function(){e.newAdSlots(t,r)}))},e.deleteAdSlots=function(t){e.loaded||ne("deleteAdSlots"),e.queue.push((function(){e.deleteAdSlots(t)}))},e.newStickyFooter=function(t){e.loaded||ne("newStickyFooter"),e.queue.push((function(){e.newStickyFooter(t)}))},e.newSidewall=function(t){e.loaded||ne("newSidewall"),e.queue.push((function(){e.newSidewall(t)}))},e.newVideo=function(t){e.loaded||ne("newVideo"),e.queue.push((function(){e.newVideo(t)}))},e.newPushdown=function(t){e.loaded||ne("newPushdown"),e.queue.push((function(){e.newPushdown(t)}))},e.newStandAlonePlayer=function(t){e.loaded||ne("newStandAlonePlayer"),e.queue.push((function(){e.newStandAlonePlayer(t)}))},e.deleteStandAlonePlayer=function(t){e.loaded||ne("deleteStandAlonePlayer"),e.queue.push((function(){e.deleteStandAlonePlayer(t)}))}}(),Fe.initManager(),!freestar.modulesLoaded.pubfig){let e=!1;const t=window.performance.getEntriesByType("navigation");t.length>0&&t[0].loadEventEnd>0&&(e=!0),window.addEventListener("load",(function(){e=!0})),Tr.get("fsLoadPubfigVersion")&&(window.freestar.pubfigVersionToLoad=Tr.get("fsLoadPubfigVersion")),Q().checkForAlternativeInstances({isTest:!1}),$.logMark({markerName:m.pubfigInitRequestStart,isFreestarDataCollectorInitialized:!1}),async function(e){let t=q({key:Ke});if(t&&(t=JSON.parse(t),t.timestamp&&(Date.now()-t.timestamp)/1e3/60>=180&&(t=null)),("PROD"!==Ye().env||"PROD"===Ye().env&&t&&t.altconfig)&&(t=!1),!t){const r=await fetch(function(){const e=Ye();let t=o.replace("ENV",e.env);"TEST"===e.env&&(t+=a.replace("NUMBER",e.version.toString())),"PROD"!==e.env&&(t+=c);const r=q({key:f}),n=q({key:g});return r&&(t+=d.replace("TEST_ID",r)),n&&(t+=l.replace("VARIANT_ID",n)),t}(),{credentials:"include"});r.ok||e({error:`No data returned from initURL fetching fsdata endpoint: ${r.status}`}),t=await r.json(),t.timestamp=Date.now(),"TEST"!==Ye().env||t.altconfig||(t.altconfig=!0),L({key:Ke,value:t,type:U.object})}if(freestar.msg.que=freestar.msg.que||[],t&&0===Object.keys(t).length)return window.freestar.msg.que.push({eventType:"customEvent",args:{eventName:"INIT_ENDPOINT_FAILED",eventType:"EMPTY_FSDATA",jsonValue:JSON.stringify(window.freestar.fsdata)}}),Ze({callback:e});t?(Q().checkForAlternativeInstances({isTest:Xe({pubfigSettings:t.pubfigSettings})}),window.freestar.msg.fpc=Qe({data:t,dataPath:"fsuid"}),window.freestar.locData=Qe({data:t,dataPath:"location"}),window.freestar.networkMap=Qe({data:t,dataPath:"networkMap.networks"}),window.freestar.fsdata=Qe({data:t,dataPath:"pubfigSettings.fsdata"}),window.freestar.adRefreshTurboConfig=Qe({data:t,dataPath:"adRefresh"}),Pe(window.freestar.fsdata,window.freestar.adRefreshTurboConfig),window.freestar.fsdata&&0===Object.keys(window.freestar.fsdata).length&&(window.freestar.msg.que.push({eventType:"customEvent",args:{eventName:"INIT_ENDPOINT_FAILED",eventType:"EMPTY_FSDATA",jsonValue:JSON.stringify(window.freestar.fsdata)}}),Ze({callback:e})),Be().fetch({fetchFn:We,requestId:"getIdealData",onError:()=>{Be().fetch({requestId:"getFloorsData",fetchFn:()=>Je(window.freestar.deviceInfo.device.vendor,window.freestar.deviceInfo.device.type,0)})}}),e(null,{})):e({error:"Empty fsdata returned from get call"})}(((t,r)=>{if($.logMark({markerName:m.pubfigInitRequestEnd,compareTo:[m.pubfigInitRequestStart]}),j(window.freestar.fsdata.cmpType,window.freestar.locData),I({}),Z(),Ir(),dt(),freestar.fsdata.footerBiddingEnabled&&!function({name:e}){return!(!window.freestar.config.products[e]||!window.freestar.config.products[e].disabled||(window.freestar.log(1,`${i[e].prettyName} Disabled via freestar.config.products.${e}.disabled`),0))}({name:"footerBidding"})){let{psoDisableInteraction:t=!1}=freestar.fsdata;(!st()||st()&&t)&&(e?ie():window.addEventListener("load",ie)),st()&&!t&&ct({name:"engine",callback:ie})}else ie();freestar.modulesLoaded.pubfig=!0}))}}();
